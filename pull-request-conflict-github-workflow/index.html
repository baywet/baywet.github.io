<!doctype html><html lang=en dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>GitHub Actions: Automatic conflicting pull request tagging and comment</title><meta name=author content="Vincent Biret"><meta name=description content="Open-source repositories enable tremendous productivity in software development. Growth in user base usually translates in growth in contributors, which in turns translates in a better solution..."><meta name=generator content="Hugo 0.115.2"><meta itemprop=name content="GitHub Actions: Automatic conflicting pull request tagging and comment"><meta itemprop=description content="Open-source repositories enable tremendous productivity in software development. Growth in user base usually translates in growth in contributors, which in turns translates in a better solution..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="GitHub Actions: Automatic conflicting pull request tagging and comment"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/pull-request-conflict-github-workflow/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Open-source repositories enable tremendous productivity in software development. Growth in user base usually translates in growth in contributors, which in turns translates in a better solution..."><meta property="og:site_name" content="Baywet's blog"><meta property="og:updated_time" content="2023-07-10T13:54:46-04:00"><meta property="article:published_time" content="2020-09-13T14:00:00+00:00"><meta property="article:modified_time" content="2023-07-10T13:54:46-04:00"><meta property="article:section" content><meta property="article:tag" content="build"><meta property="article:tag" content="ci"><meta property="article:tag" content="alm"><meta property="article:tag" content="github"><meta property="article:tag" content="oss"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="GitHub Actions: Automatic conflicting pull request tagging and comment"><meta name=twitter:description content="Open-source repositories enable tremendous productivity in software development. Growth in user base usually translates in growth in contributors, which in turns translates in a better solution..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/en><div class="title is-4">&nbsp;Baywet's blog</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span>
<span></span>
<span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=https://baywet.github.io/fr/actions-github-label-comment-conflit/>Fran√ßais</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>GitHub Actions: Automatic conflicting pull request tagging and comment</h1><p class=subtitle>Sep 13, 2020</p><div class=content><p>Open-source repositories enable tremendous productivity in software development. Growth in user base usually translates in growth in contributors, which in turns translates in a better solution bringing more users and so on&mldr; <strong>Maintaining large open-source repositories can be time-consuming</strong> as you spend more and more time reviewing contributions. Don&rsquo;t take me wrong, that time spent reviewing pull requests is mostly well spent as it represents a factor of scale efficiency gain: for minutes spent reviewing any given pull request, the codebase benefits hours of development efforts invested by the contributor.</p><p>Because people are chosing to spend their time contributing to your project, which they could be spending a million other ways, <strong>you want to make sure their pull request is <em>looked at</em> as soon as possible</strong>, and let them know as soon as a problem emmerges. A fluid review experience not only ensures that the pull request will end up being merged but it also encourages contributors to submit more pull requests in the future. At the same time, you want to use as many tools as possible to avoid <a href="https://www.bing.com/search?q=open+source+maintainer+burnout">open source maintainers burnout</a>. You might already know that I really enjoy automating as much trivial work as possible so I can spend my time on value-adding tasks.</p><p><strong>One problem a pull request can encounter is a merge conflict</strong>. Let&rsquo;s suppose Alice and Bob both have brilliant ideas to add to your project, at about the same time. They both forked the repository and started working. Alice was faster at finishing her pull request and submitted it first, quickly followed by Bob. They both introduced changes in files that conflict with each other (edited the same lines). You start by reviewing Alice&rsquo;s pull request, it&rsquo;s pristine, and you decide to merge it right away. Now your attention is required somewhere else and you don&rsquo;t look at Bob&rsquo;s.</p><p><strong>It is generally accepted that contributors should submit clean pull requests</strong> (no conflicts, code builds and passes unit tests, atomic, docs updated&mldr;) and they should maintain it in a clean state until the pull request gets merged. Bob&rsquo;s pull request will show the following status, requiring the conflicts to be resolved before it can be merged into the codebase.</p><p><img src=./conflicting-PR-status.png alt="pull request conflicting status"></p><p>This status does not send any notification to the contributor, and it doesn&rsquo;t display anything on any list. This makes it <strong>hard for you as a maintainer to identify at glance which pull requests are conflicting</strong> so you can focus on reviewing the ones that are ready. This can also <strong>stall the pull request</strong> unless Bob comes check on his pull request and why it hasn&rsquo;t been merged yet or <strong>unless you take the time to leave a comment</strong> asking Bob to resolve conflicts.</p><p>This friction and latency point can easily be improved through automation using <a href=https://github.com/features/actions>GitHub actions workflows</a>. This workflow is currently being used by the <a href=https://github.com/microsoftgraph/microsoft-graph-docs>Microsoft Graph Docs repository</a> and by some Microsoft Graph SDK repositories. It triggers on pushes to the master branch as well as on pull requests targeting the master branch and uses the <a href=https://github.com/eps1lon/actions-label-merge-conflict>eps1lon/actions-label-merge-conflict</a> action to:</p><ol><li>Identify which pull requests are now conflicting/not conflicting anymore based on the last update.</li><li>Automatically add/remove tags based on this information so it&rsquo;s easier for you to identify at glance which pull requests are conflicting.</li><li>Automatically comment based on the information so the contributors receive a notification.</li></ol><p>You can see that conflicting pull requests are much easier to identify (and even filter out) when looking at all the pull requests on the repository.</p><p><img src=./conflicting-PR-summary.png alt="conflicting pull requests status"></p><p>Here is an example of what a message for a conflicting pull request looks like.</p><p><img src=./conflicting-PR-message.png alt="conflicting pull request message"></p><p>Lastly, here is the sample worklow. You need to place this file under <code>/.github/workflows/somename.yml</code> in your repository and you can of course tweak it to your convenience.</p><blockquote><p><strong>Note:</strong> you might wonder why this workflow triggers on push. That is because <code>GITHUB_TOKEN</code> for pull requests coming from forks will have read-only permissions, which prevents it from labeling and/or commenting issues. The action goes through all the open pull requests whenever it&rsquo;s triggered on push.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>PullRequestConflicting</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Controls when the action will run. Triggers the workflow on push or pull request</span>
</span></span><span style=display:flex><span><span style=color:#75715e># events but only for the master branch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>master, dev ]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>types</span>: [<span style=color:#ae81ff>synchronize]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>master, dev ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># This workflow contains a single job called &#34;build&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># The type of runner that the job will run on</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Steps represent a sequence of tasks that will be executed as part of the job</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>check if prs are dirty</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>eps1lon/actions-label-merge-conflict@releases/2.x</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>if</span>: <span style=color:#ae81ff>env.LABELING_TOKEN != &#39;&#39; &amp;&amp; env.LABELING_TOKEN != null</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>id</span>: <span style=color:#ae81ff>check</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>dirtyLabel</span>: <span style=color:#e6db74>&#34;conflicting&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>repoToken</span>: <span style=color:#e6db74>&#34;${{ secrets.GITHUB_TOKEN  }}&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>continueOnMissingPermissions</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>commentOnDirty</span>: <span style=color:#e6db74>&#39;This pull request has conflicting changes, the author must resolve the conflicts before this pull request can be merged.&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>commentOnClean</span>: <span style=color:#e6db74>&#39;Conflicts have been resolved. A maintainer will take a look shortly.&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>LABELING_TOKEN</span>: <span style=color:#ae81ff>${{secrets.GITHUB_TOKEN }}</span>
</span></span></code></pre></div></div><br><p class=heading>Last edited
<a href=https://github.com/baywet/blogsource/commit/ff68ee4caf4356e64b0255953aa4f46c5d9f8414>Jul 10, 2023</a> by <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/tags/build><span class=tag>Build</span></a></div><div class=control><a href=/tags/ci><span class=tag>Ci</span></a></div><div class=control><a href=/tags/alm><span class=tag>Alm</span></a></div><div class=control><a href=/tags/github><span class=tag>Github</span></a></div><div class=control><a href=/tags/oss><span class=tag>Oss</span></a></div><div class=control><a href=/tags/github><span class=tag>Github</span></a></div><div class=control><a href=/tags/actions><span class=tag>Actions</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/pm-experience-dev-sdk/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">My personal experience as a Program Manager and switching back to development</span>
<span class="is-hidden-touch is-hidden-widescreen">My personal experience as a Program Manager and switching back to...</span>
<span class="is-hidden-mobile is-hidden-desktop">My personal experience as a Program Manager and...</span>
<span class=is-hidden-tablet>My personal experience as a Program...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/msbuild-msgraph-whatsnew/><span class="is-hidden-touch is-hidden-desktop-only">Microsoft Build 2020 Microsoft Graph session recordings available</span>
<span class="is-hidden-touch is-hidden-widescreen">Microsoft Build 2020 Microsoft Graph session recordings available</span>
<span class="is-hidden-mobile is-hidden-desktop">Microsoft Build 2020 Microsoft Graph session...</span>
<span class=is-hidden-tablet>Microsoft Build 2020 Microsoft Graph...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/pull-request-conflict-github-workflow/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-10-06-08-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Conclusion&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-10-02-08-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Monitoring the results&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-25-08-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Setting up Azure Active directory for authentication&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/speaking-at-sharepoint-saturda-2017-03-09-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaking at SharePoint Saturday Vancouver 2017&nbsp;<div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/new-tasks-to-buildrelease-dotn/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>New tasks to build/release dotnetcore project with vsts&nbsp;<div class=tag>Build</div><div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/speaking-at-sharepoint-saturda-2016-04-01-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaking at SharePoint Saturday Houston 2016&nbsp;<div class=tag>Build</div><div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/speaking-at-sharepoint-saturda-2016-03-30-15-36-54/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaking at SharePoint Saturday Montr√©al 2016&nbsp;<div class=tag>Build</div><div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/controlled-update-of-sql-datab/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Controlled update of SQL databases Schema with Entity Framework Code First in a continous delivery process&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/units-tests-using-xunit-and-vi/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Units tests using xUnit and Visual Studio Team Services for DNX projects&nbsp;<div class=tag>Build</div><div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/building-dnx-projects-using-ho/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Building DNX projects using home installed build agent (TFS, VSTS)&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/git-migration-cleaning-up-tfs/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Git Migration ‚Äì cleaning up TFS references&nbsp;<div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/automatically-increment-sharep/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Automatically increment SharePoint feature version number during build with build 2015&nbsp;<div class=tag>Build</div><div class=tag>Ci</div><div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/speaking-at-sharepoint-saturda-2015-11-10-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaking at SharePoint Saturday Ottawa 2015&nbsp;<div class=tag>Alm</div></span></a><a class=panel-block href=https://baywet.github.io/net-library-for-alchemy-api/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>.Net Library for Alchemy API&nbsp;<div class=tag>Github</div></span></a><a class=panel-block href=https://baywet.github.io/deploying-cloud-service-via-ne/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Deploying cloud service via new 2015 build templates&nbsp;<div class=tag>Build</div><div class=tag>Alm</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/en><span class=icon><i class="fa fa-home"></i></span></a> &nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>