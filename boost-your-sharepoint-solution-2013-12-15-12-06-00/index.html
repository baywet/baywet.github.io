<!doctype html><html lang=en dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Boost your SharePoint solutions with distributed cache!–Part 2–Explanations tips and warnings</title><meta name=author content="Vincent Biret"><meta name=description content="Explanations, tips, tricks and warnings
Explanations
This cache cluster is in facts made of appfabric hosts (caching services). One of the advantages is that hosts not members of the cluster but..."><meta name=generator content="Hugo 0.98.0"><meta itemprop=name content="Boost your SharePoint solutions with distributed cache!–Part 2–Explanations tips and warnings"><meta itemprop=description content="Explanations, tips, tricks and warnings
Explanations
This cache cluster is in facts made of appfabric hosts (caching services). One of the advantages is that hosts not members of the cluster but..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Boost your SharePoint solutions with distributed cache!–Part 2–Explanations tips and warnings"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/boost-your-sharepoint-solution-2013-12-15-12-06-00/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Explanations, tips, tricks and warnings
Explanations
This cache cluster is in facts made of appfabric hosts (caching services). One of the advantages is that hosts not members of the cluster but..."><meta property="og:site_name" content="Baywet's blog"><meta property="og:updated_time" content="2022-05-16T04:10:57-07:00"><meta property="article:published_time" content="2013-12-15T12:06:00+00:00"><meta property="article:modified_time" content="2022-05-16T04:10:57-07:00"><meta property="article:section" content><meta property="article:tag" content="distributed"><meta property="article:tag" content="2013"><meta property="article:tag" content="performance"><meta property="article:tag" content="dev"><meta property="article:tag" content="cache"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Boost your SharePoint solutions with distributed cache!–Part 2–Explanations tips and warnings"><meta name=twitter:description content="Explanations, tips, tricks and warnings
Explanations
This cache cluster is in facts made of appfabric hosts (caching services). One of the advantages is that hosts not members of the cluster but..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/en><div class="title is-4">&nbsp;Baywet's blog</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span>
<span></span>
<span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=/fr>Français</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>Boost your SharePoint solutions with distributed cache!–Part 2–Explanations tips and warnings</h1><p class=subtitle>Dec 15, 2013</p><div class=content><h3 id=explanations-tips-tricks-and-warnings>Explanations, tips, tricks and warnings</h3><h4 id=explanations>Explanations</h4><p>This cache cluster is in facts made of appfabric hosts (caching services). One of the advantages is that hosts not members of the cluster but clients of it keep a local copy of objects. And this copy is automatically maintained up to date. The result is you do not need to implement a lazy loading pattern to avoid back and forth on the network.</p><p>How does it work? It is very simple. The cache cluster is divided into partitions (defined by SharePoint, se enum <a href=https://msdn.microsoft.com/en-us/library/office/microsoft.sharepoint.distributedcaching.utilities.spdistributedcachecontainertype.aspx>SPDistributedCacheContainerType</a> ). You cannot create a partition dedicated to your application. Try to cache your data in a partition which makes sense with what you are doing.</p><p>Cached data can also belong to a region. You can create regions if you need to, regions will allow you to interact with your data in an easier way.</p><p>Distributed cache also provides a solution for locking/unlocking problematic. Methods are available to manage locking status. You also have access to information about your cached data like version last update, locking status, data expiration date… This can be very useful for advanced usages.</p><h4 id=tips-and-tricks>Tips and tricks</h4><p>This cluster is not only accessible from IIS Context. That means you can read/write in/from the cache from a timerjob, a service, etc. This is useful when you want to pre-load data in cache.</p><p>Another information to consider: the kind of data you store in the cache. You will get better performances if you cache only frequently used data (and not necessarily all data) and/or data requiring of lot of time to process (like calculated data for a report for example). Avoid storing big objects in cache, they take time to load over the network and it can increase a lot latency, moreover you take the risk to fill the cache quickly. Prefer smallest possible objects, if you have objects collections for example, try to reorganize and spit data, even if you have to maintain an index (or many).</p><p>I personally advise you to always set a region to your cached data. It is always useful, especially when you need to flush your data and reload everything.</p><p>During development, it often happens that your cache cluster does not work anymore. This caused by continual deployments and debugging tools. Open SharePoint Management Shell and issue this two cmdlets: use-cachecluster, then restart-cachecluster. Wait until you do not have any fragmented partition (get-cacheclusterhealth) and you can debug again!</p><p>Last tip, I never store fully typed data in the cache. I serialize data before (using a dictionary for all properties for example). Why? AppFabric can perfectly store your typed data. Though, I observed that when you do that, it has a tendency to load your assembly in it’s applicative context. It is really annoying on a development environment where you are continually redeploying and when this can lock the dll and make the deployment fail.</p><h4 id=warnings-and-disadvantages>Warnings and disadvantages</h4><p>Warning, SharePoint comes with a particular (old) version of AppFabric, do not modify anything in hosts’ settings without using SharePoint powershell cmdlets. Do not try either to update the SharePoint version of AppFabric, this is not supported.</p><p>A disadvantage with this version of AppFabric, it does not allow you to use metadata. Let’s say for example we have a data “credit card” which is related to “bank” and to “user”. To make credit cards usage I could tag each credit card with bank-&lt;bankID> and user-&lt;userID>. This would allow me to easily retrieve credit cards by user and/or by bank. Unfortunately this is not possible with this version of AppFabric and in that case I have to maintain indexes of cached data myself, with the involved risks.</p><p>You have to understand that you are not the only one to be able to access your cached data. Your data have an expiration delay and can “disappear” if data lifecycle is not properly managed. If the cluster is out of free space (less than 10% free ram on a host), it will start cleaning up data. Finally, do not store sensitive data and consider the fact that, for many reasons, the cluster can be down while your solution is still up.</p><p>The last disadvantage is an architectural one, your application relies on one more software component: the cache cluster. If this one does not work or does not work well (because our itpro’s friends do not always do their job properly :P), your solution could not work anymore. This is something your have to think about when coding or even in your disaster recovery/continuity plan. Depending on the importance of your application you can choose to let it fail when the cluster is down, to fallback to a minimal service mode, to fallback to load data directly from the database or even choose not to implement this cache. It all depends on the constraints of your project. Note that if the cache cluster ids down, a lot of built-in SharePoint features won’t work anymore or slower. (social, security, pages loading time…)</p></div><br><p class=heading>Last edited
<a href=https://github.com/baywet/blogsource/commit/2c2a964f748e80643e5dda94c82b343d042425fe>May 16, 2022</a> by <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/tags/distributed><span class=tag>Distributed</span></a></div><div class=control><a href=/tags/2013><span class=tag>2013th</span></a></div><div class=control><a href=/tags/performance><span class=tag>Performance</span></a></div><div class=control><a href=/tags/dev><span class=tag>Dev</span></a></div><div class=control><a href=/tags/cache><span class=tag>Cache</span></a></div><div class=control><a href=/tags/developer><span class=tag>Developer</span></a></div><div class=control><a href=/tags/sharepoint><span class=tag>Sharepoint</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/help-me-to-speak-at-sp24-the-f/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Help me to speak at SP24 the first SharePoint (web) conference all around the world!</span>
<span class="is-hidden-touch is-hidden-widescreen">Help me to speak at SP24 the first SharePoint (web) conference all around...</span>
<span class="is-hidden-mobile is-hidden-desktop">Help me to speak at SP24 the first SharePoint...</span>
<span class=is-hidden-tablet>Help me to speak at SP24 the first...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/boost-your-sharepoint-solution-2013-12-13-02-35-30/><span class="is-hidden-touch is-hidden-desktop-only">Boost your SharePoint solutions with distributed cache!- Part 1–Introduction</span>
<span class="is-hidden-touch is-hidden-widescreen">Boost your SharePoint solutions with distributed cache!- Part...</span>
<span class="is-hidden-mobile is-hidden-desktop">Boost your SharePoint solutions with distributed...</span>
<span class=is-hidden-tablet>Boost your SharePoint solutions with...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/boost-your-sharepoint-solution-2013-12-15-12-06-00/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/boost-your-sharepoint-solution-2013-12-13-02-35-30/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Boost your SharePoint solutions with distributed cache!- Part 1–Introduction&nbsp;<div class=tag>2013th</div><div class=tag>Performance</div><div class=tag>Cache</div><div class=tag>Developer</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/sharepoint-auto-hosted-app-and/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>SharePoint Auto hosted app and ASP.NET MVC&nbsp;<div class=tag>2013th</div><div class=tag>Dev</div><div class=tag>Developer</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/entity-framework-and-dataconte/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Entity Framework and dataContext reference for a web application&nbsp;<div class=tag>Dev</div><div class=tag>Developer</div></span></a><a class=panel-block href=https://baywet.github.io/speaker-at-sharepoint-saturday/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaker at SharePoint Saturday Ottawa!&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/the-name-initializecon/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>(English) The name 'InitializeControl' does not exist in the current context Controles utilisateur, SharePoint 2013 and Ressources&nbsp;<div class=tag>2013th</div><div class=tag>Sharepoint</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/en><span class=icon><i class="fa fa-home"></i></span></a> &nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>