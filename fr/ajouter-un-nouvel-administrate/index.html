<!doctype html><html lang=fr dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres</title><meta name=author content><meta name=description content="Nombre d’entre vous désirent avoir plusieurs administrateurs de ferme SharePoint 2010 mais se heurtent à des problèmes de permissions.
Par défaut lorsqu’un utilisateur standard du domaine, avec..."><meta name=generator content="Hugo 0.74.3"><meta itemprop=name content="Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres"><meta itemprop=description content="Nombre d’entre vous désirent avoir plusieurs administrateurs de ferme SharePoint 2010 mais se heurtent à des problèmes de permissions.
Par défaut lorsqu’un utilisateur standard du domaine, avec..."><meta itemprop=image content><meta property="og:title" content="Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/ajouter-un-nouvel-administrate/"><meta property="og:image" content><meta property="og:description" content="Nombre d’entre vous désirent avoir plusieurs administrateurs de ferme SharePoint 2010 mais se heurtent à des problèmes de permissions.
Par défaut lorsqu’un utilisateur standard du domaine, avec..."><meta property="og:site_name" content="Le blog de baywet"><meta property="article:published_time" content="2010-09-09T15:16:00+00:00"><meta property="article:section" content><meta property="article:tag" content="console"><meta property="article:tag" content="powershell"><meta property="article:tag" content="admin"><meta property="article:tag" content="ferme"><meta property="article:tag" content="2010"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres"><meta name=twitter:description content="Nombre d’entre vous désirent avoir plusieurs administrateurs de ferme SharePoint 2010 mais se heurtent à des problèmes de permissions.
Par défaut lorsqu’un utilisateur standard du domaine, avec..."><meta name=twitter:creator content><meta name=twitter:image:src content><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-176061333-1','auto');ga('send','pageview');</script></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span><span></span><span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=/en>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><p class=title>Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres</p><p class=subtitle>Sep 9, 2010</p><div class=content><p>Nombre d’entre vous désirent avoir plusieurs administrateurs de ferme SharePoint 2010 mais se heurtent à des problèmes de permissions.</p><p>Par défaut lorsqu’un utilisateur standard du domaine, avec uniquement le droit de RDP sur la machine locale et aucun droit sur la ferme tente de lancer la console SharePoint il obtient cela :</p><p><img src=./01.jpg alt=01.jpg></p><p>Nous allons donc commencer par lui donner les droits sur la ferme SharePoint, pour cela ouvrez l’administration centrale de SharePoint (avec le compte admin de ferme hein ;-) ), cliquez sur la section sécurité et cliquez sur « Gérer les administrateurs de la ferme »</p><p>Cliquez sur « nouveau », « ajouter un utilisateur » et ajouter votre utilisateur via l’interface suivante.</p><p><img src=./02.jpg alt=02.jpg></p><p>De retour sur la session à laquelle vous voulez ajouter les droits vous obtenez toujours le même message d’erreur et c’est normal. Il faut maintenant ajouter les droits sur le serveur SQL, pour cela, toujours avec l’admin de ferme ouvrez le SQL Management Studio, Connectez-vous au serveur de base de données de SharePoint.</p><p>Une fois connecté sur la gauche dans Security puis login ajoutez un nouveau login (clic droit sur logins, new login)</p><p><img src=./03.jpg alt=03.jpg></p><p>Une nouvelle fenêtre apparait alors, dans la case « login name » entrez nomdedomaine\nomdelogin</p><p>Dans l’onglet « Server Roles » cochez le rôle sysadmin</p><p>Dans l’onglet « User Mapping » cochez les bases « SP_Config » & « SP_AdminContent », pour chacune d’entre elle spécifiez le schéma dbo et cochez le rôle « db_owner »</p><p>Validez.</p><p>Si vous revenez sur la session à laquelle nous essayons de donner les droits sur la ferme et que vous lancez la console, vous obtenez toujours le même message d’erreur, c’est normal.</p><p>Pour l’accès et le déploiement des binaires sur un serveur et/ou sur la ferme (notamment tout ce qui tourne autour du GAC) il faut être administrateur local de la machine.</p><p>Pour cela rendez-vous avec un admin local ou de domaine sur chaque serveur sharepoint de la ferme ouvrez le gestionnaire de serveur et dans configuration => Utilisateurs et groupes locaux => Groupes ajoutez l’utilisateur en question au groupe administrateurs</p><p><img src=./04.jpg alt=04.jpg></p><p>Note : vous pouvez donner les droits à plusieurs niveaux, ainsi, si votre domaine n’est pas trop complexe il vous suffira de rajouter l’utilisateur en tant qu’admin de domaine, sinon pour diminuer l’effort administratif vous pouvez créer un groupe de domaine « adminfermesp » dans lequel vous ajouterez notre utilisateur et qui sera lui-même ajouté en tant qu’admin local sur chaque machine…</p><p>Pensez à vous déconnecter et à vous reconnecter (session windows) pour appliquer les nouveaux droits avec le compte que nous sommes en train d’ajouter</p><p>Lancez maintenant la console en mode administratif et vous pourrez constater qu’elle fonctionne correctement pour toutes les commandes PowerShell.</p><p><img src=./05.jpg alt=05.jpg></p><p>Pour le pourquoi du comment en fait définir un admin de ferme dans l’administration centrale permet de donner à un utilisateur l’accès à cette même administration centrale, dont les ordres sont exécutés avec le compte de service de l’admin centrale.</p><p>Par contre lorsque l’utilisateur lance la console power Shell c’est son compte qui est utilisé pour toutes les instructions envoyées.</p><p>Cela fonctionne avec le compte qui a installé la ferme SharePoint car il a nativement les droits sur les bases de données, machines et autres du fait du procédé d’installation, mais les droits sont manquants pour les autres utilisateurs, même des administrateurs de domaine.</p></div><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/console><span class=tag>Console</span></a></div><div class=control><a href=/fr/tags/powershell><span class=tag>Powershell</span></a></div><div class=control><a href=/fr/tags/admin><span class=tag>Admin</span></a></div><div class=control><a href=/fr/tags/ferme><span class=tag>Ferme</span></a></div><div class=control><a href=/fr/tags/2010><span class=tag>2010th</span></a></div><div class=control><a href=/fr/tags/sharepoint><span class=tag>Sharepoint</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/usercontrol-non-reconnu-comme/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span><span class="is-hidden-touch is-hidden-desktop-only">UserControl non reconnu comme tel dans visual studio</span>
<span class="is-hidden-touch is-hidden-widescreen">UserControl non reconnu comme tel dans visual studio</span>
<span class="is-hidden-mobile is-hidden-desktop">UserControl non reconnu comme tel dans visual...</span>
<span class=is-hidden-tablet>UserControl non reconnu comme tel dans...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/microsoft-day-a-aix-en-provenc/><span class="is-hidden-touch is-hidden-desktop-only">Microsoft Day à Aix en Provence le 30/09/10</span>
<span class="is-hidden-touch is-hidden-widescreen">Microsoft Day à Aix en Provence le 30/09/10</span>
<span class="is-hidden-mobile is-hidden-desktop">Microsoft Day à Aix en Provence le 30/09/10</span>
<span class=is-hidden-tablet>Microsoft Day à Aix en Provence le...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/ajouter-un-nouvel-administrate/";this.page.identifier=window.location.pathname;};(function(){var d=document,s=d.createElement('script');s.src='https://baywet.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/configuration-du-service-profi/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Configuration du service profil utilisateur sous SharePoint 2010/2007&nbsp;<div class=tag>2010th</div><div class=tag>Sharepoint</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span></a>&nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>