<!doctype html><html lang=fr dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Build DNX avec agent build vnext installé (TFS , VSTS)</title><meta name=author content="Vincent Biret"><meta name=description content="Avec DNX/DNU qui va bientôt arriver en RTM vous allez êtres nombreux à vouloir builder et déployer de l’ASP.NET Core 1 (appelé asp.net mvc 5 il n’y a encore pas si longtemps que ça)
Si la procédure..."><meta name=generator content="Hugo 0.85.0"><meta itemprop=name content="Build DNX avec agent build vnext installé (TFS , VSTS)"><meta itemprop=description content="Avec DNX/DNU qui va bientôt arriver en RTM vous allez êtres nombreux à vouloir builder et déployer de l’ASP.NET Core 1 (appelé asp.net mvc 5 il n’y a encore pas si longtemps que ça)
Si la procédure..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Build DNX avec agent build vnext installé (TFS , VSTS)"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/build-dnx-avec-agent-build-vne/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Avec DNX/DNU qui va bientôt arriver en RTM vous allez êtres nombreux à vouloir builder et déployer de l’ASP.NET Core 1 (appelé asp.net mvc 5 il n’y a encore pas si longtemps que ça)
Si la procédure..."><meta property="og:site_name" content="Le blog de baywet"><meta property="og:updated_time" content="2021-07-09T06:42:50-04:00"><meta property="article:published_time" content="2016-02-19T14:00:00+00:00"><meta property="article:modified_time" content="2021-07-09T06:42:50-04:00"><meta property="article:section" content><meta property="article:tag" content="build"><meta property="article:tag" content="asp.net mvc"><meta property="article:tag" content="vsts"><meta property="article:tag" content="vso"><meta property="article:tag" content="dnvm"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Build DNX avec agent build vnext installé (TFS , VSTS)"><meta name=twitter:description content="Avec DNX/DNU qui va bientôt arriver en RTM vous allez êtres nombreux à vouloir builder et déployer de l’ASP.NET Core 1 (appelé asp.net mvc 5 il n’y a encore pas si longtemps que ça)
Si la procédure..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-176061333-1','auto'),ga('send','pageview')</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span><span></span><span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=https://baywet.github.io/building-dnx-projects-using-ho/>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>Build DNX avec agent build vnext installé (TFS , VSTS)</h1><p class=subtitle>Feb 19, 2016</p><div class=content><p>Avec DNX/DNU qui va bientôt arriver en RTM vous allez êtres nombreux à vouloir builder et déployer de l’ASP.NET Core 1 (appelé asp.net mvc 5 il n’y a encore pas si longtemps que ça)</p><p>Si la procédure est assez bien décrite dans le cadre où vous utilisez les agents fournis par visual studio team services (ceux hébergés dans azure) c’est un peu plus complexe dans les faits quand on veut le faire en local.</p><p><a href="https://msdn.microsoft.com/en-us/Library/vs/alm/Build/azure/deploy-aspnet5?f=255&MSPPError=-2147217396">https://msdn.microsoft.com/en-us/Library/vs/alm/Build/azure/deploy-aspnet5?f=255&MSPPError=-2147217396</a></p><p>Sur votre agent vous avez installé visual studio à jour et c’est tout non ?</p><p>Premièrement vous aurez toujours besoin du script prebuild pour aller chercher le runtime adéquat. Mais une fois cela en place dans votre processus de build vous rencontrerez des erreurs du genre :</p><p>dnx.win32.dll could not be loaded. Last error: 126</p><p>Cela vient du fait que par défaut l’agent VSO (build 2015, pas le vieil agent XAML) tourne en tant que local system et que donc il essaie d’installer tout ce qui est relative à dnx ici</p><p>C:\Windows\system32\config\systemprofile.dnx</p><p>Simplement ce dossier étant dans system32 il est protégé et ça pose problème.</p><p>La solution la plus viable à mon sens est de faire tourner le service de build avec un compte de service (non administrateur !). Pour effectuer cela il faut ré-exécuter le script de configure agent.</p><p>Bon builds !</p></div><br><p class=heading>Edité la dernière fois le
<a href=https://github.com/baywet/blogsource/commit/03d43f98afb8806ab74f4e0ca844988effbe5695>9 Jul 2021</a> par <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/build><span class=tag>Build</span></a></div><div class=control><a href=/fr/tags/asp.net-mvc><span class=tag>Asp.Net Mvc</span></a></div><div class=control><a href=/fr/tags/vsts><span class=tag>Vsts</span></a></div><div class=control><a href=/fr/tags/vso><span class=tag>Vso</span></a></div><div class=control><a href=/fr/tags/dnvm><span class=tag>Dnvm</span></a></div><div class=control><a href=/fr/tags/dnx><span class=tag>Dnx</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/tests-unitaires-xunit-avec-vis/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Tests unitaires xUnit avec Visual Studio Team Services de projets DNX</span>
<span class="is-hidden-touch is-hidden-widescreen">Tests unitaires xUnit avec Visual Studio Team Services de projets DNX</span>
<span class="is-hidden-mobile is-hidden-desktop">Tests unitaires xUnit avec Visual Studio Team...</span>
<span class=is-hidden-tablet>Tests unitaires xUnit avec Visual Studio...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/conferencier-au-sharepoint-sat-2016-02-10-14-00-00/><span class="is-hidden-touch is-hidden-desktop-only">Conférencier au SharePoint Saturday Vancouver 2016</span>
<span class="is-hidden-touch is-hidden-widescreen">Conférencier au SharePoint Saturday Vancouver 2016</span>
<span class="is-hidden-mobile is-hidden-desktop">Conférencier au SharePoint Saturday Vancouver 2016</span>
<span class=is-hidden-tablet>Conférencier au SharePoint Saturday...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/build-dnx-avec-agent-build-vne/",this.page.identifier=window.location.pathname};(function(){var a=document,b=a.createElement('script');b.src='https://baywet.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/erreur-lors-de-la-publication/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Erreur lors de la publication de sites web asp.net 5 (core) vers Azure&nbsp;<div class=tag>Dnx</div></span></a><a class=panel-block href=https://baywet.github.io/fr/incrementer-automatiquement-le/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Incrémenter automatiquement le numéro de version de fonctionnalité SharePoint avec le build 2015&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/fr/deploiement-de-cloud-services/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déploiement de Cloud services Azure via les builds 2015&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/fr/build-automatise-de-solutions/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Build automatisé de solutions SharePoint (full trust) 2013 – Où sont mes solutions?&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/fr/visual-studio-2013-update-4-et/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Visual Studio 2013 Update 4 et build automatisé de solutions SharePoint (full trust)&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/fr/build-automatise-de-solution-s/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Build automatisé de solution SharePoint server (fulltrust) avec visual studio online&nbsp;<div class=tag>Build</div></span></a><a class=panel-block href=https://baywet.github.io/fr/conversion-dun-certificat-prot/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Conversion d’un certificat protégé par mot de passe (pfx) en certificat non protégé (snk)&nbsp;<div class=tag>Build</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span></a> &nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>