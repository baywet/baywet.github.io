<!doctype html><html lang=fr dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>WCF + Entity FrameWork Code First + Azure</title>
<meta name=author content="Vincent Biret"><meta name=description content="Introduction
Nous allons aujourd’hui nous intéresser à une certaine (ubber) approche de développement qui pourrait convenir à beaucoup. Celle de déployer des WCF auto-générés sur Azure à partir d’un..."><meta name=generator content="Hugo 0.123.0"><meta itemprop=name content="WCF + Entity FrameWork Code First + Azure"><meta itemprop=description content="Introduction
Nous allons aujourd’hui nous intéresser à une certaine (ubber) approche de développement qui pourrait convenir à beaucoup. Celle de déployer des WCF auto-générés sur Azure à partir d’un..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="WCF + Entity FrameWork Code First + Azure"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/wcf-entity-framework-code-fir/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Introduction
Nous allons aujourd’hui nous intéresser à une certaine (ubber) approche de développement qui pourrait convenir à beaucoup. Celle de déployer des WCF auto-générés sur Azure à partir d’un..."><meta property="og:site_name" content="Le blog de baywet"><meta property="og:updated_time" content="2024-02-19T15:51:13-05:00"><meta property="article:published_time" content="2012-07-08T21:33:00+00:00"><meta property="article:modified_time" content="2024-02-19T15:51:13-05:00"><meta property="article:section" content><meta property="article:tag" content="codefirst"><meta property="article:tag" content="azure"><meta property="article:tag" content="entityframewok"><meta property="article:tag" content="wcf"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="WCF + Entity FrameWork Code First + Azure"><meta name=twitter:description content="Introduction
Nous allons aujourd’hui nous intéresser à une certaine (ubber) approche de développement qui pourrait convenir à beaucoup. Celle de déployer des WCF auto-générés sur Azure à partir d’un..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span>
<span></span>
<span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a href=/fr/quotfailed-to-open-microsoftwi/ class=navbar-item>&amp;quot;failed to open Microsoft.WindowsUpdate page home&amp;quot; windows server 2012 core
</a><a href=/fr/acces-anonyme-a-une-applicatio/ class=navbar-item>Accès anonyme à une application auto-hébergée pour SharePoint
</a><a href=/fr/actions-github-label-comment-conflit/ class=navbar-item>Actions GitHub: étiquetage et commentaire automatique des pull requests en conflit
</a><a href=/fr/afterworks-des-communautes-mic/ class=navbar-item>Afterworks des communautés Microsoft à Aix-En-Provence
</a><a href=/fr/aidez-moi-a-tre-conferencier-a/ class=navbar-item>Aidez-moi à être conférencier à la SP24 la première web conférence tout autour du monde !
</a><a href=/fr/ajout-programmatique-de-permis/ class=navbar-item>Ajout Programmatique de permissions à « tout le monde » dans SharePoint Online
</a><a href=/fr/ajouter-un-nouvel-administrate/ class=navbar-item>Ajouter un nouvel administrateur de ferme SharePoint pouvant éxécuter la console PowerShell sans encombres
</a><a href=/fr/ajouter-une-web-app-sharepoint/ class=navbar-item>Ajouter une Web App SharePoint à un SSO AD FS existant
</a><a href=/fr/atelier-mise-en-place-dune-sol/ class=navbar-item>Atelier mise en place d'une solution de provisionnement Office 365 pour Teams et SharePoint à la Modern Workplace Conference Paris
</a><a href=/fr/ayez-tous-les-outils-dune-star/ class=navbar-item>Ayez tous les outils d’une startup de première classe en 10 min
</a><a href=/fr/azure-bug-avec-la-definition/ class=navbar-item>Azure – Bug avec la définition de paramètres depuis Azure WebSites
</a><a href=/fr/boost-your-sharepoint-solution/ class=navbar-item>Boost your SharePoint solutions with distributed cache!–Part 3–Let’s Code!
</a><a href=/fr/boostez-vos-solutions-sharepoi-2013-12-11-01-15-14/ class=navbar-item>Boostez vos solutions SharePoint avec le cache distribué !–Partie 1 Introduction
</a><a href=/fr/boostez-vos-solutions-sharepoi-2013-12-12-09-08-00/ class=navbar-item>Boostez vos solutions SharePoint avec le cache distribué !–Partie 2–Explications et astuces
</a><a href=/fr/boostez-vos-solutions-sharepoi-2013-12-14-20-21-00/ class=navbar-item>Boostez vos solutions SharePoint avec le cache distribué !–Partie 3–Le code
</a><a href=/fr/build-automatise-de-solution-s/ class=navbar-item>Build automatisé de solution SharePoint server (fulltrust) avec visual studio online
</a><a href=/fr/build-automatise-de-solutions/ class=navbar-item>Build automatisé de solutions SharePoint (full trust) 2013 – Où sont mes solutions?
</a><a href=/fr/build-de-projets-wspftc-sharep/ class=navbar-item>Build de projets WSP/FTC SharePoint 2016
</a><a href=/fr/build-dnx-avec-agent-build-vne/ class=navbar-item>Build DNX avec agent build vnext installé (TFS , VSTS)
</a><a href=/fr/ce-que-jai-retenu-de-lignite-s/ class=navbar-item>Ce que j’ai retenu de l’ignite (SharePoint)
</a><a href=/fr/changement-dans-le-cycle-de-li/ class=navbar-item>Changement dans le cycle de livraison des CU pour SharePoint
</a><a href=/fr/conferencier-espc-2020/ class=navbar-item>Compte à rebours ESPC20 en ligne
</a><a href=/fr/configuration-de-la-topologie/ class=navbar-item>Configuration de la topologie de recherche d’entreprise dans SharePoint 2013
</a><a href=/fr/configuration-du-service-profi/ class=navbar-item>Configuration du service profil utilisateur sous SharePoint 2010/2007
</a><a href=/fr/conference-sur-windows-server/ class=navbar-item>Conférence sur Windows Server a SUPINFO Marseille
</a><a href=/fr/conferences-a-venir-en-2013/ class=navbar-item>Conférences à venir en 2013
</a><a href=/fr/conferences-a-venir-en-2014/ class=navbar-item>Conférences à venir en 2014
</a><a href=/fr/conferencier-au-aos-tours-mont/ class=navbar-item>Conférencier au Aos Tours Montréal et Québec
</a><a href=/fr/conferencier-au-collab365/ class=navbar-item>Conférencier au collab365
</a><a href=/fr/conferencier-au-msdevmtl-deve/ class=navbar-item>Conférencier au MSDEVMTL – Développement office 365
</a><a href=/fr/conferencier-au-sharepoint-sat-2016-04-04-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Calgary 2016
</a><a href=/fr/conferencier-au-sharepoint-sat-2015-09-11-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday de Toronto 2015
</a><a href=/fr/conferencier-au-sharepoint-sat-2016-04-01-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Houston 2016
</a><a href=/fr/conferencier-au-sharepoint-sat-2016-09-12-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Lyon 2016
</a><a href=/fr/conferencier-au-sharepoint-sat-2017-04-25-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Monaco 2017
</a><a href=/fr/conferencier-au-sharepoint-sat-2015-05-21-00-49-38/ class=navbar-item>Conférencier au SharePoint Saturday Montréal 2015
</a><a href=/fr/conferencier-au-sharepoint-sat-2016-03-30-15-29-00/ class=navbar-item>Conférencier au SharePoint Saturday Montréal 2016
</a><a href=/fr/conferencier-au-sharepoint-sat-2015-10-23-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday New Hampshire 2015
</a><a href=/fr/conferencier-au-sharepoint-sat-2015-05-25-01-12-00/ class=navbar-item>Conférencier au SharePoint Saturday New York City 2015
</a><a href=/fr/conferencier-au-sharepoint-sat-2015-11-10-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Ottawa 2015
</a><a href=/fr/conferencier-au-sharepoint-sat-2017-07-07-08-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Paris 2017
</a><a href=/fr/conferencier-au-sharepoint-sat-2016-02-10-14-00-00/ class=navbar-item>Conférencier au SharePoint Saturday Vancouver 2016
</a><a href=/fr/conferencier-au-spbizconf/ class=navbar-item>Conférencier au SPBizConf
</a><a href=/fr/conversion-dun-certificat-prot/ class=navbar-item>Conversion d’un certificat protégé par mot de passe (pfx) en certificat non protégé (snk)
</a><a href=/fr/convertir-proprement-des-docum/ class=navbar-item>Convertir proprement des documents Word en HTML
</a><a href=/fr/creer-des-librairies-pour-les/ class=navbar-item>Créer des librairies pour les projets SharePoint
</a><a href=/fr/cest-parti-pour-18-mois/ class=navbar-item>C’est parti pour 18 mois !
</a><a href=/fr/deux-msp-testent-kinect/ class=navbar-item>Deux MSP testent Kinect
</a><a href=/fr/diagnotiquer-les-problemes-de/ class=navbar-item>Diagnotiquer les problèmes de load balancing sous SharePoint
</a><a href=/fr/disponibilite-des-samples-et-s/ class=navbar-item>Disponibilité des Samples et SDK office 365 sur Github
</a><a href=/fr/donnez-votre-avis-sur-le-rempl/ class=navbar-item>Donnez votre avis sur le remplaçant d’infopath !
</a><a href=/fr/debut-de-la-publication-des-ar/ class=navbar-item>Début de la publication des articles des membres sur le site du labo
</a><a href=/fr/nouveau-blog-10-ans/ class=navbar-item>Déménagement du blog pour les dix ans
</a><a href=/fr/deplacement-des-javascript-des/ class=navbar-item>Déplacement des Javascript des Apps (add-ins) SharePoint
</a><a href=/fr/deploiement-de-cloud-services/ class=navbar-item>Déploiement de Cloud services Azure via les builds 2015
</a><a href=/fr/deployer-son-ou-ses-blogs-blog/ class=navbar-item>Déployer son (ou ses) blog(s) BlogEngine sur Azure
</a><a href=/fr/depreciation-des-apps-auto-heb/ class=navbar-item>Dépréciation des Apps Auto-hébergées
</a><a href=/fr/desactiver-les-fonctionnalites/ class=navbar-item>Désactiver les fonctionnalités de SEO de SharePoint
</a><a href=/fr/determiner-si-la-librairie-sha/ class=navbar-item>Déterminer si la librairie SharePoint est utilisée avec la nouvelle expérience
</a><a href=/fr/determinez-votre-dette-techniq-2016-10-31-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 1 - Introduction
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-21-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 10 - Création d’un compte de service et référencement dans VSTS
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-23-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 11 - Ajout du projet SonarQube
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-28-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 12 - Contrôle des résultats
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-25-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 12 - Mise à jour de votre définition de build
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-30-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 13 - Bonus configuration de l’extension SonarLint
</a><a href=/fr/determinez-votre-dette-techniq-2016-12-02-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 14 - Conclusion
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-02-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 2 - Analyse Statique
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-04-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 3 - La topologie
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-07-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 4 - Provisionnement de la VM SonarQube
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-09-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 5 - Ouverture du port de SonarQube
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-11-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 6 - Création de la base de données
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-14-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 7 - Installation de la machine
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-16-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 8 - Ajout de modules
</a><a href=/fr/determinez-votre-dette-techniq-2016-11-18-14-00-00/ class=navbar-item>Déterminez votre dette technique à l’aide de SonarQube : 9 - Configuration d’Azure Active directory pour l’authentification
</a><a href=/fr/ecrire-du-code-securise-pour-s/ class=navbar-item>Ecrire du code sécurisé pour SharePoint
</a><a href=/fr/entity-framework-et-reference/ class=navbar-item>Entity Framework et référence au dataContext pour une application web
</a><a href=/fr/entrevue-avec-le-visual-studio/ class=navbar-item>Entrevue avec le Visual Studio Talk Show - SonarQube
</a><a href=/fr/erreur-lors-de-la-publication/ class=navbar-item>Erreur lors de la publication de sites web asp.net 5 (core) vers Azure
</a><a href=/fr/erreur-unable-to-find-version/ class=navbar-item>Erreur: unable to find version '3.1.2' of package 'appforsharepointonlinewebtoolkit'
</a><a href=/fr/evolution-de-la-compatibilite/ class=navbar-item>Evolution de la compatibilité système SharePoint 2010 et 2013
</a><a href=/fr/evenements-annonce-des-sessi/ class=navbar-item>Evènements - Annonce des sessions de l’Ignite
</a><a href=/fr/feedback-msday-aix-en-provence/ class=navbar-item>Feedback MSDay Aix-En-Provence 30/09/10
</a><a href=/fr/fin-de-la-gamme-forefront/ class=navbar-item>Fin de la gamme ForeFront
</a><a href=/fr/fldtype-custom-field-qui-ne-s/ class=navbar-item>Fldtype / custom field qui ne s’affiche pas dans la liste des colonnes de la liste (paramètres) après ajout.
</a><a href=/fr/gagnez-des-packs-kinect-avec-e/ class=navbar-item>Gagnez des packs Kinect avec Etudiants.ms
</a><a href=/fr/gestion-des-ressources-rendre/ class=navbar-item>Gestion des ressources, rendre vos solutions SharePoint « globally deployed »
</a><a href=/fr/git-forkimportercopie-manuell/ class=navbar-item>Git : fork/importer/copie manuelle, bonnes pratiques
</a><a href=/fr/global-azure-bootcamp-2017-ed/ class=navbar-item>Global Azure Bootcamp 2017 – Edition de Montréal
</a><a href=/fr/global-office-365-dev-bootcamp/ class=navbar-item>Global Office 365 Dev Bootcamp Montreal 2018
</a><a href=/fr/ignite-annonce-des-conferenci/ class=navbar-item>Ignite – Annonce des conférenciers et liste complète des sessions
</a><a href=/fr/incrementer-automatiquement-le/ class=navbar-item>Incrémenter automatiquement le numéro de version de fonctionnalité SharePoint avec le build 2015
</a><a href=/fr/industrialisation-des-installa-2011-07-06-15-47-00/ class=navbar-item>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 1
</a><a href=/fr/industrialisation-des-installa-2011-07-06-16-11-00/ class=navbar-item>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 2
</a><a href=/fr/industrialisation-des-installa-2011-07-06-16-42-00/ class=navbar-item>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 3
</a><a href=/fr/inscriptions-aux-techdays-2011/ class=navbar-item>Inscriptions aux TechDays 2011 ouvertes
</a><a href=/fr/installation-des-prerequis-sha/ class=navbar-item>Installation des prérequis SharePoint 2013 sur des serveurs hors ligne
</a><a href=/fr/installer-le-sdk-dotnet-sous-ubuntu-wsl/ class=navbar-item>Installer le SDK dotnet sous Ubuntu WSL
</a><a href=/fr/installing-sharepoint-2013-pre/ class=navbar-item>Installing SharePoint 2013 prerequisites on offline environments
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-18-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 1
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-21-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 2
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-22-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 3
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-23-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 4
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-25-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 5
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-26-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 6
</a><a href=/fr/introduction-au-single-sign-on-2011-09-26-22-29-00/ class=navbar-item>Introduction au single sign on sur SharePoint 2010 - partie 7
</a><a href=/fr/invite-au-webcast-de-pimpmysha/ class=navbar-item>Invité au webcast de @PimpMySharePoint !
</a><a href=/fr/itemupdating-et-itemupdated-le/ class=navbar-item>ItemUpdating et ItemUpdated levé deux fois dans des SPDocuementLibrary
</a><a href=/fr/itlounge-sharepoint-and-good/ class=navbar-item>ITLounge – SharePoint and good vibes
</a><a href=/fr/je-ne-suis-plus-mvp-office-ser/ class=navbar-item>Je ne suis plus MVP Office Servers and Services et deviens MVP Office development
</a><a href=/fr/je-rejoins-2tolead/ class=navbar-item>Je rejoins 2ToLead
</a><a href=/fr/kinect-au-msp-day/ class=navbar-item>Kinect au MSP Day
</a><a href=/fr/la-mise-a-jour-davril-2013-pou/ class=navbar-item>La mise à jour d’avril 2013 pour SharePoint est disponible
</a><a href=/fr/la-version-complete-de-lodash/ class=navbar-item>La version complète de lodash est disponible avec le SharePoint Framework
</a><a href=/fr/laboratoire-microsoft-repris/ class=navbar-item>Laboratoire Microsoft - Reprise des publications des articles
</a><a href=/fr/le-cloud-computing-oui-mais-p/ class=navbar-item>Le Cloud Computing : oui mais pas pour n’importe qui, n’importe quoi ni n’importe comment.
</a><a href=/fr/le-developer-dashboard-reste-v/ class=navbar-item>Le developer dashboard reste vide sur SharePoint 2013
</a><a href=/fr/le-laboratoire-microsoft-aux-t/ class=navbar-item>Le Laboratoire Microsoft aux TechDays - Venez nous rencontrer
</a><a href=/fr/le-mode-de-compatibilite-inter/ class=navbar-item>Le mode de compatibilité Internet Explorer de SharePoint Online change
</a><a href=/fr/le-service-pack-1-de-la-gamme/ class=navbar-item>Le service Pack 1 de la gamme Office 2013 (client et serveur) est sorti !
</a><a href=/fr/le-yos-tour-passe-par-montreal/ class=navbar-item>Le yOS tour passe par Montréal !
</a><a href=/fr/les-annonces-marquantes-de-la/ class=navbar-item>Les annonces marquantes de la SharePoint Conference 2014 pour Office 365
</a><a href=/fr/les-joies-de-spitemeventproper/ class=navbar-item>Les joies de SPItemEventProperties.AfterProperties
</a><a href=/fr/les-outils-de-developpement-po/ class=navbar-item>Les outils de développement pour SharePoint dans Visual Studio 2012
</a><a href=/fr/les-techdays-2011-cest-bon-ma/ class=navbar-item>Les Techdays 2011 : C’est bon, Mangez-en!
</a><a href=/fr/librairie-net-alchemy-api/ class=navbar-item>Librairie .NET Alchemy API
</a><a href=/fr/livrer-un-produit-chez-microsoft/ class=navbar-item>Livrer un produit chez Microsoft: Kiota
</a><a href=/fr/localisation-du-javascript-dun/ class=navbar-item>Localisation du JavaScript d’une solution Full Trust
</a><a href=/fr/localisation-du-repertoire-de/ class=navbar-item>Localisation du répertoire de décompression du setup SharePoint
</a><a href=/fr/microsoft-365-saturday-montrea/ class=navbar-item>Microsoft 365 Saturday Montréal 2019
</a><a href=/fr/sessions-msbuild-2020-msgraph/ class=navbar-item>Microsoft Build 2020 enregistrement des sessions Microsoft Graph disponibles
</a><a href=/fr/microsoft-day-a-aix-en-provenc/ class=navbar-item>Microsoft Day à Aix en Provence le 30/09/10
</a><a href=/fr/microsoft-graph-http2/ class=navbar-item>Microsoft Graph et HTTP/2
</a><a href=/fr/microsoft-student-partner-cana/ class=navbar-item>Microsoft Student Partner Canada
</a><a href=/fr/migration-git-nettoyage-des-r/ class=navbar-item>Migration Git – nettoyage des références TFS
</a><a href=/fr/migration-team-foundation-serv/ class=navbar-item>Migration Team Foundation Server 2010 vers Visual Studio Online : différence de modèle de processus
</a><a href=/fr/migrations-du-laboratoire-part-2010-11-08-08-51-00/ class=navbar-item>Migrations du Laboratoire Partie 1
</a><a href=/fr/migrations-du-laboratoire-part-2010-11-15-17-06-00/ class=navbar-item>Migrations du Laboratoire Partie 2 - Forum
</a><a href=/fr/migrations-du-laboratoire-part-2010-11-22-14-46-00/ class=navbar-item>Migrations du Laboratoire Partie 3 - FaqXP, BlogSeven et CertifExpress
</a><a href=/fr/mirroring-sql-et-sharepoint-t/ class=navbar-item>Mirroring SQL et SharePoint : Tips & Piège
</a><a href=/fr/mise-a-jour-dot-net-core-et-i/ class=navbar-item>Mise à jour : dot net core et intégration continue
</a><a href=/fr/mise-a-jour-cumulative-doctobr/ class=navbar-item>Mise à jour cumulative d’Octobre 2013 pour SharePoint 2010
</a><a href=/fr/mise-a-jour-de-mars-des-outils/ class=navbar-item>Mise à jour de Mars des outils de développement Office pour Visual Studio
</a><a href=/fr/mise-a-jour-de-novembre-des-ou/ class=navbar-item>Mise à jour de Novembre des outils développeurs Office
</a><a href=/fr/mise-a-jour-des-definitions-de/ class=navbar-item>Mise à jour des définitions de types pour _spPageContextInfo - nouvelles propriétés disponibles
</a><a href=/fr/mise-a-jour-des-outils-cks/ class=navbar-item>Mise à jour des Outils CKS
</a><a href=/fr/mise-a-jour-du-repo-sonarqube/ class=navbar-item>Mise à jour du repo SonarQube
</a><a href=/fr/mise-a-jour-maitrisee-de-schem/ class=navbar-item>Mise à jour maitrisée de schema SQL avec Entity Framework Code First dans un processus de livraison continue
</a><a href=/fr/mise-a-jour-vers-update-windo/ class=navbar-item>Mise à jour vers / Update Windows server 2012 et Windows Update Services
</a><a href=/fr/moins-de-trois-semaines-avant/ class=navbar-item>Moins de trois semaines avant le #SPSMontreal 2018 !
</a><a href=/fr/experience-role-gestionnaire-programme-retour-dev/ class=navbar-item>Mon expérience personnelle en tant que gestionnaire de programme et retour au développement
</a><a href=/fr/mvp-virtual-conference/ class=navbar-item>MVP Virtual Conference
</a><a href=/fr/nombre-delements-fournis-pour/ class=navbar-item>Nombre d’éléments fournis pour la génération des facettes
</a><a href=/fr/nomination-dot-net-ranger-et-j/ class=navbar-item>Nomination Dot Net Ranger et Joyeuses Fêtes
</a><a href=/fr/nomination-microsoft-student-p/ class=navbar-item>Nomination Microsoft Student Partner
</a><a href=/fr/nouveau-job-program-manager-c/ class=navbar-item>Nouveau Job : Program Manager chez Microsoft sur le Microsoft Graph
</a><a href=/fr/nouveau-tutoriel-batissez-vot/ class=navbar-item>Nouveau tutoriel : bâtissez votre solution de provisionnement pour Office 365
</a><a href=/fr/nouveaux-exemples-sharepoint-f/ class=navbar-item>Nouveaux exemples SharePoint Framework PnP disponibles : utiliser le SDK Web Skype UCWA pour afficher le statut d’une personne
</a><a href=/fr/nouvelle-conference-microsoft/ class=navbar-item>Nouvelle conférence Microsoft la AzureCon
</a><a href=/fr/nouvelles-taches-de-buildrelea/ class=navbar-item>Nouvelles tâches de build/release disponibles pour les projets dotnetcore et vsts
</a><a href=/fr/office-365-mise-a-disposition/ class=navbar-item>Office 365 mise à disposition de la roadmap
</a><a href=/fr/organisation-dun-hakcathon-re/ class=navbar-item>Organisation d’un Hakcathon – retour d’expérience
</a><a href=/fr/participez-a-la-conception-de/ class=navbar-item>Participez à la conception de SharePoint 2016!
</a><a href=/fr/personnalisation-de-page-layou/ class=navbar-item>Personnalisation de page layouts, master pages et image renditions dans SharePoint Online
</a><a href=/fr/petit-msp-devient-grand-mvp/ class=navbar-item>Petit MSP devient grand MVP
</a><a href=/fr/pourquoi-ne-pas-inclure-de-con/ class=navbar-item>Pourquoi ne pas inclure de contrôles télérik dans vos produits SharePoint ?
</a><a href=/fr/provisionnement-des-services-c/ class=navbar-item>Provisionnement des services customs dans SharePoint
</a><a href=/fr/publier-des-image-renditions-p/ class=navbar-item>Publier des Image renditions pour SharePoint à l’aide de PnP Provisioning
</a><a href=/fr/re-realease-de-la-mise-a-jour/ class=navbar-item>Re-Realease de la mise à jour cumulative de Juin (CU1 June)
</a><a href=/fr/reconduite-de-mon-titre-msp/ class=navbar-item>Reconduite de mon titre MSP
</a><a href=/fr/refonte-des-packs-de-langue-po/ class=navbar-item>Refonte des packs de langue pour SharePoint 2010
</a><a href=/fr/revitalisation-repo-github/ class=navbar-item>Refonte du SDK Java Microsoft Graph : une recette pour revitaliser les repos open-source
</a><a href=/fr/remise-a-disposition-du-sp1-po/ class=navbar-item>Remise à disposition du SP1 pour SharePoint 2013
</a><a href=/fr/renouvele-mvp-pour-lannee-2016/ class=navbar-item>Renouvelé MVP pour l’année 2016
</a><a href=/fr/renouvele-mvp-pour-lannee-2017/ class=navbar-item>Renouvelé MVP pour l’année 2017-2018
</a><a href=/fr/renouvele-mvp-sharepoint-pour/ class=navbar-item>Renouvelé MVP SharePoint pour la deuxième année et retour d’expérience
</a><a href=/fr/requtage-active-directory-depu/ class=navbar-item>Requêtage Active Directory depuis SharePoint.
</a><a href=/fr/retour-sur-le-sharepoint-summi/ class=navbar-item>Retour sur le SharePoint Summit de Québec 2013
</a><a href=/fr/retrait-du-sp1-de-sp2013-sp1/ class=navbar-item>Retrait du SP1 de SP2013 / SP1 for SP2013 not available anymore
</a><a href=/fr/resolution-de-dependance-commu/ class=navbar-item>Résolution de dépendance communes en développement de solutions full trust SharePoint
</a><a href=/fr/service-de-cache-distribue-de/ class=navbar-item>Service de Cache distribué de SharePoint 2013 – SPDistributedCacheService – comment ne pas se manger ?
</a><a href=/fr/service-pack-1-for-office-suit/ class=navbar-item>Service Pack 1 for Office suite 2013 (client and server) is out!
</a><a href=/fr/session-aux-microsoft-techdays/ class=navbar-item>Session aux Microsoft Techdays 2012
</a><a href=/fr/sharepoint-2013-app-et-wsp/ class=navbar-item>SharePoint 2013 App et WSP
</a><a href=/fr/sharepoint-2013-beta-failed-t/ class=navbar-item>SharePoint 2013 beta – failed to open sms.resx
</a><a href=/fr/sharepoint-2013-et-les-workflo/ class=navbar-item>SharePoint 2013 et les workflows - nouveautés
</a><a href=/fr/sharepoint-2013-rtm-disponible/ class=navbar-item>SharePoint 2013 RTM disponible pour les abonnés MSDN!
</a><a href=/fr/sharepoint-2013-vectorized-log/ class=navbar-item>SharePoint 2013 vectorized logo / logo SharePoint 2013 vectorialisé
</a><a href=/fr/sharepoint-2013-disponibilite/ class=navbar-item>SharePoint 2013 – Disponibilité Générale et Mise à jour obligatoire de Mars
</a><a href=/fr/sharepoint-auto-upgrade-soluti/ class=navbar-item>SharePoint Auto Upgrade Solution
</a><a href=/fr/sharepoint-autohosted-app-et-a/ class=navbar-item>SharePoint autohosted app et ASP.NET MVC
</a><a href=/fr/sharepoint-framework-180-et-te/ class=navbar-item>SharePoint Framework 1.8.0 et tests unitaires : plus de karma
</a><a href=/fr/sharepoint-framework-dans-mes/ class=navbar-item>SharePoint framework dans mes propres mots
</a><a href=/fr/sharepoint-framework-et-devops/ class=navbar-item>SharePoint Framework et DevOps : Nouvelle documentation, nouveaux exemples
</a><a href=/fr/sharepoint-saturday-montreal-2/ class=navbar-item>SharePoint Saturday Montréal 2015
</a><a href=/fr/sharepoint-saturday-quebec/ class=navbar-item>SharePoint Saturday Québec
</a><a href=/fr/sharepoint-summit-2013-a-quebe/ class=navbar-item>SharePoint Summit 2013 à Québec
</a><a href=/fr/site-sur-le-cloud-computing-by/ class=navbar-item>Site sur le cloud computing, by technet
</a><a href=/fr/slideshare-account-now-sharing/ class=navbar-item>SlideShare Account now sharing my presentations! Compte SlideShare retrouvez mes présentations !
</a><a href=/fr/sortie-de-la-mise-a-jour-cumul/ class=navbar-item>Sortie de la mise à jour cumulative de Juin 2013 pour SharePoint
</a><a href=/fr/sortie-de-la-preview-publique/ class=navbar-item>Sortie de la Preview publique de SharePoint 2013
</a><a href=/fr/sortie-du-service-pack-2-pour/ class=navbar-item>Sortie du Service Pack 2 pour SharePoint 2010
</a><a href=/fr/sp1-pour-sharepoint-2010/ class=navbar-item>SP1 pour SharePoint 2010
</a><a href=/fr/systemupdate-enfin-disponible/ class=navbar-item>SystemUpdate enfin disponible en CSOM
</a><a href=/fr/selectionne-pour-le-sharepoint/ class=navbar-item>Sélectionné pour le SharePoint Saturday New York City !
</a><a href=/fr/selectionne-pour-les-10-plus-g/ class=navbar-item>Sélectionné pour les 10 plus grands influenceurs SharePoint Francophones!
</a><a href=/fr/tests-unitaires-xunit-avec-vis/ class=navbar-item>Tests unitaires xUnit avec Visual Studio Team Services de projets DNX
</a><a href=/fr/the-name-initializecontrol-doe/ class=navbar-item>The name 'InitializeControl' does not exist in the current context Controles utilisateur, SharePoint 2013 et Ressources
</a><a href=/fr/the-vhd-must-be-stored-as-a-pa-2014-03-05-01-45-11/ class=navbar-item>The VHD must be stored as a page blob. Upload a vhd to azure
</a><a href=/fr/the-vhd-must-be-stored-as-a-pa-2014-03-05-01-40-57/ class=navbar-item>The VHD must be stored as a page blob. Uploader un vhd vers azure
</a><a href=/fr/topologie-des-fermes-sharepoin/ class=navbar-item>Topologie des fermes SharePoint et déploiement de ForeFront Protection for SharePoint
</a><a href=/fr/traduire-sharepoint-2013/ class=navbar-item>Traduire SharePoint 2013
</a><a href=/fr/trois-nouveaux-sur-la-platefor/ class=navbar-item>Trois nouveaux sur la plateforme Microsoft Touch !
</a><a href=/fr/un-an-developpeur-microsoft/ class=navbar-item>Un an en tant que développeur chez Microsoft
</a><a href=/fr/une-page-se-tourne-je-ne-suis/ class=navbar-item>Une page se tourne, je ne suis plus MSP
</a><a href=/fr/update-sonarqube-endpoints-e/ class=navbar-item>Update : SonarQube : Endpoints et tâches
</a><a href=/fr/upgrade-des-bases-de-donnees-m/ class=navbar-item>Upgrade des bases de données mirrorées avec le SP1 de SharePoint
</a><a href=/fr/upgrade-sharepoint-2013-sche/ class=navbar-item>Upgrade SharePoint 2013 - Schemas
</a><a href=/fr/uploader-automatiquement-les-p/ class=navbar-item>Uploader automatiquement les photos des utilisateurs SharePoint sur leur profil en PowerShell
</a><a href=/fr/usercontrol-non-reconnu-comme/ class=navbar-item>UserControl non reconnu comme tel dans visual studio
</a><a href=/fr/utiliser-pnp-powershell-avec-v/ class=navbar-item>Utiliser PnP PowerShell avec Visual Studio Team Services (VSTS) et l'agent hébergé
</a><a href=/fr/veille-technologique-et-places/ class=navbar-item>Veille technologique et places de cinéma
</a><a href=/fr/video-de-ma-session-aux-techda/ class=navbar-item>Video de ma session aux techdays
</a><a href=/fr/visual-studio-2010-amp-les-out/ class=navbar-item>Visual Studio 2010 & les outils autours des données (SQL)
</a><a href=/fr/visual-studio-2013-rc-comptag/ class=navbar-item>Visual Studio 2013 RC : Comptage des références à votre code
</a><a href=/fr/visual-studio-2013-update-4-et/ class=navbar-item>Visual Studio 2013 Update 4 et build automatisé de solutions SharePoint (full trust)
</a><a href=/fr/vue-densemble-des-services-de/ class=navbar-item>Vue d’ensemble des services de conversion des documents dans SharePoint 2010
</a><a href=/fr/warmmeup-warmup-sharepoint-20/ class=navbar-item>WarmMeUp – WarmUp SharePoint 2013 (et 2010)
</a><a href=/fr/wcf-entity-framework-code-fir/ class="navbar-item
is-active">WCF + Entity FrameWork Code First + Azure
</a><a href=/fr/webcast-pour-les-itpros-sur-of/ class=navbar-item>Webcast pour les ITPros sur Office 365
</a><a href=/fr/webconference-sur-la-securite/ class=navbar-item>WebConférence sur la sécurité avec la gamme ForeFront 2010
</a><a class=navbar-item href=/en>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>WCF + Entity FrameWork Code First + Azure</h1><p class=subtitle>Jul 8, 2012</p><div class=content><h2 id=introduction>Introduction</h2><p>Nous allons aujourd’hui nous intéresser à une certaine (ubber) approche de développement qui pourrait convenir à beaucoup. Celle de déployer des WCF auto-générés sur Azure à partir d’un modèle Code First Entity Framework.</p><p>Mais quelle langue il nous parle là ? Oui en effet quelques rappels s’imposent.</p><p>Entity Framework : Technologie .NET poussée depuis quelques années pour l’accès et la manipulation des données qui permet de faire abstraction du moteur de bases qui tourne en dessous. Couche d’accès aux données. Ce que ça change dans l’approche de développement c’est que vous manipulez uniquement des objets (entités) et non plus des enregistrements en base (donc plus de requête SQL à écrire, meilleures possibilités de débug etc)</p><p>Code First : Avec l’entity framework il y a trois approches de développement possibles. Model First à partir d’un schéma (edmx) vous concevez votre couche d’accès aux données et modèle sous-jacent. Database First vous partez d’une base de données existante pour générer la couche d’accès aux données. Code First, disponible depuis la version 4.1, vous définissez vos classes (qui représenteront votre couche d’accès aux données, vous les tagguez et ça vous génère votre modèle de base de données.</p><p>WCF : Windows Communication Foundation, sous ensemble du .NET Framework de technologies de communication inter-applications et unification des modèles de développement sur ces mêmes technologies (abstraction, factorisation du code, rapidité de développement…). Ici c’est la partie Web Services qui nous intéresse et plus particulièrement WCF Data Services.</p><p>Azure : Service de cloud computing proposé par Microsoft au niveau IaaS et PaaS. Vous permet d’héberger bases de données, services web, machines virtuelles…</p><p>Maintenant qu’on a dégrossi les briques principales de notre méthodologie nous allons rentrer un peu plus dans le détail.</p><p>L’objectif de cet article n’est pas d’expliquer comment on fait un modèle de base de données en Code First ni comment on crée un web service mais plutôt de vous proposer une méthodologie.</p><p>Pour le reste c’est assez bien expliqué ici <a href=https://blogs.msdn.com/b/adonet/archive/2011/03/21/using-wcf-data-services-with-entity-framework-4-1-and-code-first.aspx>https://blogs.msdn.com/b/adonet/archive/2011/03/21/using-wcf-data-services-with-entity-framework-4-1-and-code-first.aspx</a></p><h2 id=pré-requis>Pré-requis</h2><p>Pré-requis logiciels :</p><ul><li><p>Visual Studio 2010 à jour</p></li><li><p>Le SDK Azure à jour</p></li><li><p>Entity Framework 4.1 ou supérieur (disponible ici <a href="https://www.microsoft.com/download/en/details.aspx?displaylang=en&id=8363">https://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=8363</a>  ou via Nugets)</p></li><li><p>WCF Data Services <a href="https://www.microsoft.com/downloads/fr-fr/details.aspx?familyid=5b1a903e-59e2-46e8-b63b-a9421bbb6bf9">https://www.microsoft.com/downloads/fr-fr/details.aspx?familyid=5b1a903e-59e2-46e8-b63b-a9421bbb6bf9</a></p></li><li><p>Un compte sur Azure</p></li></ul><p>Pré-requis utilisateur (savoir-faire) :</p><ul><li><p>Notions sur le .NET Framework</p></li><li><p>Notions sur Visual Studio</p></li><li><p>Notions d’architectures N-Tiers</p></li></ul><h2 id=architecture-et-détails>Architecture et détails</h2><p>La méthodologie consiste à créer notre couche d’accès aux données avec Entity Framework Code First (parce que ça va très vite et que c’est très bien) puis d’exposer ce contexte de base de données au travers de services OData (WCF Data Services) et enfin de déployer le tout sur Windows Azure (ce qui n’est pas forcément le plus simple). Le contexte de base de données ira quant à lui utiliser une base de données SQL Azure.</p><p><img alt=6724.archiWCFEFAzure.jpg src=./6724.archiWCFEFAzure.jpg></p><p>OData est un standard de publication des données et d’interaction avec celles-ci, le principe étant de respecter le protocole HTTP au maximum :</p><ul><li><p>Chaque élément à une url unique</p></li><li><p>Chaque opération respecte les Verbes HTTP</p></li></ul><p>Nous aurons ainsi un web service CRUD sans avoir à développer chacune des opérations :</p><ul><li><p>Create via le verbe HTTP POST.</p></li><li><p>Read via le verbe HTTP GET</p></li><li><p>Update via les verbes HTTP PUT ou MERGE (selon le cas de figure)</p></li><li><p>Delete via le verbe HTTP DELETE</p></li></ul><p>L’avantage en respectant ces standards c’est que ce sont justement des standards, aujourd’hui vous développez un cœur applicatif en .NET (sage décision) mais demain votre ami développeur Java, JavaScript/HTML5, Silverlight ou Objective-C qui voudra interagir avec vos données pourra aussi le faire. (Et ils vécurent heureux et eurent beaucoup d’applications ensemble dans un monde fait de standards et d’interopérabilité)</p><p>Enfin, pourquoi déployer sur Windows Azure & SQL Azure ? Pour les avantages qu’on y connait, rapidité de déploiement (pas besoin d’acheter son serveur, de configurer et d’installer une dizaine de produits Microsoft etc.), rationalisation des coûts (on ne paie que ce qu’on utilise), robustesse, montée en charge.</p><p>Bref vous l’aurez bien compris, l’objectif de cette méthodologie est de développer rapidement (mais pas n’importe comment) des applications à faible coût, fiables et à forte évolutivité.</p><h2 id=adapter-un-livrable-wcf-data-services--ef-code-first-pour-azure>Adapter un livrable WCF Data Services + EF Code first pour Azure</h2><p>On va partir du principe que vous avez lu et mis en pratique les quelques articles cités plus haut et que vous disposez d’une couche d’accès aux données qui fonctionne avec un WCF Data Service qui expose tout correctement en local (autant pour la base de données que pour le web service).</p><p>Vous avez donc deux projets au sein de votre solution :</p><ul><li><p>Un projet de type librairie qui contient votre DAL (Data Access Layer)</p></li><li><p>Un projet de type Web Application qui contient votre service OData</p></li></ul><p>A partir de là il nous reste plusieurs choses à faire :</p><ul><li><p>Créer une instance de base de données sur SQL Azure et une base de données. (je préfère vous demander de chercher, en effet l’interface est assez souvent mise à jour et d’ici à ce que vous lisiez cet article ça aura surement changé)</p></li><li><p>Déployer le modèle de base de données.</p></li><li><p>Créer un « hébergement » pour votre web service sur Windows Azure (idem)</p></li><li><p>Créer un projet Azure au sein de votre solution</p></li><li><p>Modifier quelques éléments de votre solution</p></li></ul><h2 id=la-base-de-données>La base de données</h2><p>Commençons donc par la base de données, normalement pour vos premiers tests en local elle a été déployée sur un serveur SQL et vous disposez de SQL Management Studio (si vous ne l’avez pas encore téléchargez le, c’est gratuit et très pratique quand on a besoin d’aller au-delà du déploiement automatisé de Visual Studio)</p><p>Commencez par vous connecter à l’instance SQL Serveur sur laquelle a été créée votre base de données (normalement SQLEXPRESS est installé avec Visual Studio, dans ce cas entrez en adresse .\SQLEXPRESS en authentification windows, si vous l’avez déployée ailleurs vous savez normalement comment vous y connecter).</p><p>Une fois cela effectué faites un clic droit sur votre base de données, tâches, générer les scripts. Tous les objets, vers une nouvelle fenêtre. Vous arrivez normalement sur un nouvel onglet avec des requêtes SQL. Ces requêtes sont des ordres DDL (Data Definition Language, c’est-à-dire des instructions servant à définir les structures de données au sein de la base) qui vont nous servir à déployer le modèle de base sur SQL Azure.</p><p>SQL Azure n’est pas un vrai serveur SQL à proprement parler, il est conçu de manière à supporter des centaines de milliers de bases de données ayant des besoins différents en termes de performances, volume de données etc. C’est pour cette raison qu’un certain nombre d’ordres SQL sont interdits sur SQL Azure (et aussi pour des problématiques de sécurité dans certains cas). Le script de création que nous venons de générer est lui à la base fait pour une exécution sur un vrai serveur SQL.</p><p>Il va donc falloir « nettoyer » le script avant de l’exécuter sur SQL Azure.</p><p>La première étape de ce nettoyage consiste à supprimer toutes les instructions précédant le premier CREATE TABLE. Vous pouvez ensuite effectuer plusieurs CTRL+H successifs pour rechercher et remplacer par rien (supprimer donc) les termes suivants :</p><ul><li><p>PAD_INDEX  = OFF,</p></li><li><p>, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON</p></li><li><p>ON [PRIMARY]</p></li><li><p>SORT_IN_TEMPDB = OFF,</p></li></ul><p>(Les virgules ont leur importance)</p><p>Une fois cela effectué il suffit d’exécuter le script sur la base de données, deux solutions s’offrent à vous :</p><ul><li><p>Ou vous le faites depuis une nouvelle connexion et une nouvelle fenêtre de requête dans SQL Management Studio (pensez bien à ajouter votre IP publique dans les règles de pare-feu de votre instance SQL Azure)</p></li><li><p>Ou alors vous le faites depuis le portail de gestion SQL Azure</p></li></ul><p>Note : je vous conseille de sauvegarder le script de création de la base dans Azure quelque part, ça peut servir.</p><p>Nous avons maintenant notre modèle de base de données déployé au sein d’une base de données elle-même hébergée par une instance SQL Azure. Nous allons maintenant nous pencher sur notre contexte de base de données.</p><h2 id=le-contexte-de-base-de-données>Le contexte de base de données</h2><p>Seconde étape : adapter notre contexte de base de données pour Azure. Souvenez-vous le contexte de base de données nous permet un accès aux données stockées dans notre base de données et collabore étroitement avec.</p><p>Pour ceux qui connaissent Entity Framework Database First et Model First il y a une nouvelle subtilité avec l’approche Code First, celle de DatabaseInitializer (en fait ça existait déjà mais c’était caché pour faciliter la vie au développeur)</p><p>L’idée de cet Initializer étant qu’à chaque instanciation de contexte il va vérifier la structure de la base de données pour vérifier si elle est conforme avec le code compilé et éventuellement effectuer des actions par la suite.</p><p>Celui qui est le plus souvent exposé est le DropCreateDatabaseIfModelChanges, c’est-à-dire que s’il détecte une différence entre le modèle compilé et le modèle en base, il supprime toute la structure de la base et la recrée. Ce n’est vraiment pas pratique pour deux raisons, la première c’est qu’au passage vous perdez vos données, la seconde c’est que les ordres de création utilisés sont conçus pour SQL Server et certains sont interdits.</p><p>Il nous reste donc plusieurs possibilités :</p><ul><li><p>CreateDatabaseIfNotExists : comme son nom l’indique crée la structure de base si elle n’est pas présente, ne fait rien s’il détecte une différence. (mais idem pour la création ordres SQL Server interdits, d’où le fait que nous ayons effectué un déploiement au préalable à la main)</p></li><li><p>MigrateDatabaseToLatestVersion qui vous permet de gérer un cas de migration/mise à jour</p></li><li><p>… (liste des initializers fournis par défaut avec l’EF ici <a href="https://msdn.microsoft.com/en-us/library/system.data.entity%28v=VS.103%29.aspx">https://msdn.microsoft.com/en-us/library/system.data.entity(v=VS.103).aspx</a> )</p></li><li><p>Initializer codé à la main</p></li></ul><p>Ce qu’il faut bien comprendre c’est qu’il y a un ensemble d’instructions interdites dans SQL Azure et qu’il faut faire attention à ce que notre modèle de base de données ne les utilise pas. De plus il faut faire attention aux données et à ne pas faire sauter le modèle à la première occasion.</p><p>Personnellement j’ai donc choisi le CreateDatabaseIfNotExists et lorsque j’aurai des mises à jour de schéma de base de données à effectuer il me suffira de comparer une copie du schéma actuellement en production avec la nouvelle version grâce aux outils de visual studio (voir mon article à ce sujet <a href=../visual-studio-2010-amp-les-out>visual-studio-2010-amp-les-out</a> ) et de créer un script de migration SQL.</p><p>Maintenant que nous avons choisi un Initializer de contexte de base de données nous allons passer à la partie Web Service et web config.</p><p>Note : Pensez à la méthode Seed si vous avez besoin d’avoir un jeu d’enregistrements au démarrage au sein de votre base.</p><h2 id=le-web-service>Le Web Service</h2><p>Vous avez normalement un web service WCF Data Service qui fonctionne en local au sein d’une web application. Ce qui est vraiment sympa avec cette méthodologie c’est que vous n’avez qu’une dizaine de ligne de code à taper pour créer tout un CRUD au format web service pour votre base de données. Le tout en respectant des standards du web.</p><p>La première adaptation à effectuer est de mettre à jour la connectionString pour que le web service aille chercher ses données sur SQL Azure, c’est une opération assez simple et vous avez accès aux paramètres de connexion depuis les propriétés de votre base sur le portail de gestion Azure. Je vous laisse donc faire.</p><p>La seconde modification assez mineure est à effectuer au sein de web.config toujours, elle consiste à autoriser les verbes HTTP dont on a besoin. En effet, par défaut la sécurité est moins restrictive sur un serveur IIS classique que sur Azure (et il comporte plus de modules). Tous les verbes sont donc autorisés par défaut (d’autant plus que quand vous faites vos tests en local, bien souvent on ne s’en rend pas compte mais de l’authentification passe de manière quasi transparente, ce qui n’est le cas sur Azure). L’astuce consiste donc à paramétrer la web application pour qu’elle accepte tous les verbes sans authentification (ou de paramétrer de l’authentification au choix, mais on change de sujet)</p><p>Pour cela ajoutez cette balise <code>&lt;authentication mode="None"/></code> au sein de la balise system.web (qui est elle-même au sein de la balise configuration pour rappel)</p><p>Enfin, assurez-vous que toutes les références à EntityFramework, Microsoft.Data (toutes), et à votre projet de librairie qui contient la définition de votre modèle sont bien en copie locale au sein de votre projet de web application. (les vm Azure ne possèdent pas ces dll qui sont récentes)</p><p>Il est temps maintenant de déployer le web service.</p><h2 id=déploiement-sur-windows-azure>Déploiement sur Windows Azure</h2><p>Partons du principe que vous avez déjà un web role Azure de créé depuis votre interface de gestion Azure. (si vous ne savez pas comment faire, regardez sur internet, ça évolue assez souvent)</p><p>Depuis Visual Studio ajoutez un nouveau projet de type Azure au sein de votre solution, vous allez avoir un assistant, suivez les étapes sans ajouter aucun composant pour le moment.</p><p>Une fois l’assistant terminé effectuez un clic droit sur « roles » au sein du projet nouvellement créé et ajouter un « web role »à partir de la solution, sélectionnez le projet web qui contient votre web service.</p><p>Enfin faites un clic droit sur votre projet Azure et cliquez sur « Déployer », lors de la première fois un assistant s’ouvre pour configurer les paramètres de déploiement sur votre web role et ensuite le déploiement s’effectue (c’est long, c’est normal).</p><p>Une fois que votre déploiement est terminé ça y est vous avez un Web Service Data Service qui se base sur un contexte Entity FrameWork Code First qui va chercher ses données dans SQL Azure et qui est déployé sur Windows Azure !</p><p>Maintenant que vous avez vu que c’est extrêmement rapide de créer son modèle de base de données, sa couche d’accès aux données et la publication via web service vous pouvez passer plus de temps sur le développement réellement important (du moins pour l’utilisateur final) : le côté client.</p><h2 id=conclusion-et-remerciements>Conclusion et remerciements</h2><p>Cette méthodologie est vraiment rapide et carrée j’ai simplement quelques poitnts à relever :</p><ul><li><p>Entity Framework 4.3 (dernière version au moment où j’écris l’article) ne supporte pas les énumérations pour le moment, ça arrive avec le 5 et je suis impatient.</p></li><li><p>Quand on utilise les WCF Data Services côté client, pour coller au standard on est obligé de gérer le tracking et le loading à la main, (loadproperty, addlink, setlink, deletelink…) ça vaudrait vraiment le coup d’avoir une évolution qui rende ça transparent.</p></li><li><p>L’asynchronisme côté client est pas encore très simple (surtout quand on voit ce qui arrive avec Windows 8) ce serait pas mal d’avoir des améliorations de ce côté-là aussi.</p></li></ul><p>Merci à Pierre-Alexandre GURY SUPINFO B3 qui m’a beaucoup aidé en débug sur le sujet, en effet on travaille sur des versions de framework/librairies vraiment récentes et pas encore très bien documentées. J’espère qu’il aura bientôt un blog car il est vraiment très prometteur et sait déjà plein de choses.</p><p>Merci à Benjamin ARKI, qui a encore une fois pris de son temps pour relire et corriger un article de ce blog.</p></div><br><p class=heading>Edité la dernière fois le
<a href=https://github.com/baywet/blogsource/commit/a5e0b62d8f4e5d50fc67c6d759e5d276733fd744>19 Feb 2024
</a>par <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/codefirst><span class=tag>Codefirst</span></a></div><div class=control><a href=/fr/tags/azure><span class=tag>Azure</span></a></div><div class=control><a href=/fr/tags/entityframewok><span class=tag>Entityframewok</span></a></div><div class=control><a href=/fr/tags/wcf><span class=tag>Wcf</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/les-outils-de-developpement-po/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Les outils de développement pour SharePoint dans Visual Studio 2012
</span><span class="is-hidden-touch is-hidden-widescreen">Les outils de développement pour SharePoint dans Visual Studio 2012
</span><span class="is-hidden-mobile is-hidden-desktop">Les outils de développement pour SharePoint dans...
</span><span class=is-hidden-tablet>Les outils de développement pour...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/creer-des-librairies-pour-les/><span class="is-hidden-touch is-hidden-desktop-only">Créer des librairies pour les projets SharePoint
</span><span class="is-hidden-touch is-hidden-widescreen">Créer des librairies pour les projets SharePoint
</span><span class="is-hidden-mobile is-hidden-desktop">Créer des librairies pour les projets SharePoint
</span><span class=is-hidden-tablet>Créer des librairies pour les projets...
</span><span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/wcf-entity-framework-code-fir/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/deployer-son-ou-ses-blogs-blog/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déployer son (ou ses) blog(s) BlogEngine sur Azure&nbsp;<div class=tag>Azure</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span>
</a>&nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>