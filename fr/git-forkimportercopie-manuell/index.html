<!doctype html><html lang=fr dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Git : fork/importer/copie manuelle, bonnes pratiques</title><meta name=author content="Vincent Biret"><meta name=description content="En tant que développer à 2toLead une de mes tâches récurrentes consiste à définir des bonnes pratiques de gestion du code source en interne ou pour nos clients. Une des questions qui revient souvent..."><meta name=generator content="Hugo 0.102.3"><meta itemprop=name content="Git : fork/importer/copie manuelle, bonnes pratiques"><meta itemprop=description content="En tant que développer à 2toLead une de mes tâches récurrentes consiste à définir des bonnes pratiques de gestion du code source en interne ou pour nos clients. Une des questions qui revient souvent..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Git : fork/importer/copie manuelle, bonnes pratiques"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/git-forkimportercopie-manuell/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="En tant que développer à 2toLead une de mes tâches récurrentes consiste à définir des bonnes pratiques de gestion du code source en interne ou pour nos clients. Une des questions qui revient souvent..."><meta property="og:site_name" content="Le blog de baywet"><meta property="og:updated_time" content="2022-09-04T12:33:25-04:00"><meta property="article:published_time" content="2018-03-21T09:00:00+00:00"><meta property="article:modified_time" content="2022-09-04T12:33:25-04:00"><meta property="article:section" content><meta property="article:tag" content="devops"><meta property="article:tag" content="vsts"><meta property="article:tag" content="git"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Git : fork/importer/copie manuelle, bonnes pratiques"><meta name=twitter:description content="En tant que développer à 2toLead une de mes tâches récurrentes consiste à définir des bonnes pratiques de gestion du code source en interne ou pour nos clients. Une des questions qui revient souvent..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span>
<span></span>
<span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=https://baywet.github.io/git-forkimportmanual-copy-keep/>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>Git : fork/importer/copie manuelle, bonnes pratiques</h1><p class=subtitle>Mar 21, 2018</p><div class=content><p>En tant que développer à 2toLead une de mes tâches récurrentes consiste à définir des bonnes pratiques de gestion du code source en interne ou pour nos clients. Une des questions qui revient souvent est la suivante : Si je veux partir d’une base de code existante et la modifier, devrais-je forker ce repo ou bien faire quelque chose d’autre ?</p><p>Il n’est aujourd’hui pas facile de trouver des explications simples et claires sur le web, aussi me suis-je dit que j’aller m’y essayer.</p><p>Comme nous utilisons Visual Studio Team Services, mes exemples et captures d’écran seront basés dessus, mais cela s’applique à n’importe quel service git comme Github ou même des serveurs en interne.</p><h2 id=les-options-dont-vous-disposez>Les options dont vous disposez</h2><p>De mon point de vue, lorsque vous avez un repo existant quelque part, vous disposez des options suivantes pour le déplacer/copier dépendamment de votre scenario :</p><ul><li><strong>Copie manuelle</strong>: comme son nom l’indique, prendre les fichiers et les copier autre part, puis exécuter un git init ou quelque chose de similaire pour démarrer sur des bases fraiches. Si cette option <strong>semble attirante aux premiers abords, vous le regretterez rapidement</strong> en perdant l’historique ainsi que la capacité de rapidement rapatrier des changements vers la source.</li><li><strong>Option d’import</strong>: cette option est fournie par VSTS sur les nouveaux repos. Cela importera l’historique et les branches d’un autre repo. <strong>Et c’est une bonne solution pour les scénarios de migration simples</strong>. Utilisez là si vous comptez supprimer la source ensuite ou bien si la source n’est pas sur le même service (ie : github => VSTS).</li><li><strong>Fork de repo</strong>: (depuis la source) c’est probablement la meilleure option si vous prévoyez que la source et la copie coexistent après cette opération. Cela vous permettra de porter vos commits d’un repo à un autre facilement (via des pull requests). <strong>Ce choix devrait probablement être votre approche par défaut.</strong></li></ul><p>Capture: créer une pull request entre différents repos.</p><p><img src=./12.png alt=12.png></p><p>Capture: importer un repo existant</p><p><img src=./13.PNG alt=13.PNG></p><h2 id=se-sortir-dune-situation-compromettante>Se sortir d’une situation compromettante</h2><p>Admettons que vous soyez arrivé(e) sur cet article car la situation est déjà hors de contrôle. Vous avez le « même » ensemble de sources dans plusieurs repos, et cela n’a pas été mis en place de la manière la plus recommandée, comment faire pour réparer ça ?</p><p>Avant de commencer laissez-moi vous avertir que cette opération est sujette à erreurs, peut vous faire perdre du travail accompli, va impliquer une « interruption de service » pour vos développeurs (même courte) et est fournie sans aucune garantie. Aussi, avant de commencer, assurez-vous que l’ensemble des modifications en attentes sont commises et poussées, pour chaque développeur.</p><p>Vous êtes probablement face à un de ces deux cas :</p><ul><li>Vos différents repos ont un arbre de commits en commun à un certain point (ils ont été forkés ou importés). Git va « comprendre » ce qu’il s’est passé et pouvoir vous aider.</li><li>Vos repos n’ont pas de commits en commun (car il s’agît probablement d’une copie manuelle), vous allez devoir rejouer les changements à la main, bonne chance.</li></ul><h3 id=scenario-avec-un-arbre-en-commun>Scenario avec un arbre en commun</h3><p>Supposons que vous avez la structure suivante :</p><p>ProjetA/RepoSource</p><p>ProjetB/ReposImporte</p><p>Le second étant un import du premier et le premier n’ayant pas subi de mises à jour depuis que le second a été créé. Et désormais vous souhaitez être capable de propager les modifications de ReposImporté vers la source sans avoir à le faire localement.</p><p>Commencez par forker le RepoSource vers ProjetB/RepoForke</p><p>Clonez le repo forké sur votre machine et exécutez les lignes de commande suivantes.</p><p><a href=https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-bringimportedrepobranchesbacktoforked-sh>https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-bringimportedrepobranchesbacktoforked-sh</a></p><p>Assurez-vous de bien remettre en place les « stratégies de branches », définitions de build, release etc. Profitez-en pour exécuter un outil de comparaison branche à branche entre le RepoImporté et le RepoForké.</p><p>Pour les autres développeurs de la compagnie, demandez-leur d’exécuter ce srcipt.</p><p><a href=https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-updatedevelopersrepoaftermigration-sh>https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-updatedevelopersrepoaftermigration-sh</a></p><h2 id=ma-demande-à-léquipe-produit-vsts>Ma demande à l’équipe produit VSTS</h2><p>Serait-il possible d’avoir la capacité de déplacer les repos git de projet en projet de manière simple ? et que les liens de fork suivent ?</p><p><a href=https://visualstudio.uservoice.com/forums/330519-visual-studio-team-services/suggestions/17189462-make-it-easier-to-move-a-git-repo-from-one-team-pr>https://visualstudio.uservoice.com/forums/330519-visual-studio-team-services/suggestions/17189462-make-it-easier-to-move-a-git-repo-from-one-team-pr</a></p><h2 id=conclusion>Conclusion</h2><p>J’espère que cet article aura apporté un peu de clarté sur le sujet et aidé certains d’entre vous à se sortir d’un mauvais pas.</p></div><br><p class=heading>Edité la dernière fois le
<a href=https://github.com/baywet/blogsource/commit/1d6ea33bb6f8a391d52838bca18c48631507ebac>4 Sep 2022</a> par <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/devops><span class=tag>Devops</span></a></div><div class=control><a href=/fr/tags/vsts><span class=tag>Vsts</span></a></div><div class=control><a href=/fr/tags/git><span class=tag>Git</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/le-mode-de-compatibilite-inter/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Le mode de compatibilité Internet Explorer de SharePoint Online change</span>
<span class="is-hidden-touch is-hidden-widescreen">Le mode de compatibilité Internet Explorer de SharePoint Online change</span>
<span class="is-hidden-mobile is-hidden-desktop">Le mode de compatibilité Internet Explorer de...</span>
<span class=is-hidden-tablet>Le mode de compatibilité Internet...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/nouveaux-exemples-sharepoint-f/><span class="is-hidden-touch is-hidden-desktop-only">Nouveaux exemples SharePoint Framework PnP disponibles : utiliser le SDK Web Skype UCWA pour...</span>
<span class="is-hidden-touch is-hidden-widescreen">Nouveaux exemples SharePoint Framework PnP disponibles : utiliser le SDK...</span>
<span class="is-hidden-mobile is-hidden-desktop">Nouveaux exemples SharePoint Framework PnP...</span>
<span class=is-hidden-tablet>Nouveaux exemples SharePoint Framework...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/git-forkimportercopie-manuell/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/utiliser-pnp-powershell-avec-v/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Utiliser PnP PowerShell avec Visual Studio Team Services (VSTS) et l'agent hébergé&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/mise-a-jour-du-repo-sonarqube/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Mise à jour du repo SonarQube&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/conferencier-au-sharepoint-sat-2017-04-25-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Conférencier au SharePoint Saturday Monaco 2017&nbsp;<div class=tag>Devops</div></span></a><a class=panel-block href=https://baywet.github.io/fr/update-sonarqube-endpoints-e/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Update : SonarQube : Endpoints et tâches&nbsp;<div class=tag>Devops</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-12-02-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 14 - Conclusion&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-30-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 13 - Bonus configuration de l’extension SonarLint&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-28-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 12 - Contrôle des résultats&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-25-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 12 - Mise à jour de votre définition de build&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-23-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 11 - Ajout du projet SonarQube&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-21-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 10 - Création d’un compte de service et référencement dans VSTS&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-18-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 9 - Configuration d’Azure Active directory pour l’authentification&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-16-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 8 - Ajout de modules&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-14-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 7 - Installation de la machine&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-11-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 6 - Création de la base de données&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/fr/determinez-votre-dette-techniq-2016-11-09-14-00-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Déterminez votre dette technique à l’aide de SonarQube : 5 - Ouverture du port de SonarQube&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span></a> &nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>