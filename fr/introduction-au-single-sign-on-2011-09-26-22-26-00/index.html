<!doctype html><html lang=fr dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Introduction au single sign on sur SharePoint 2010 - partie 6</title><meta name=author content="Vincent Biret"><meta name=description content="Partie précédente
SharePoint et le SSO : Configuration
Il existe des tutoriels assez détaillé sur la configuration d’AD FS et SharePoint, plutôt que de refaire ce qui a déjà été fait, je vais vous..."><meta name=generator content="Hugo 0.118.2"><meta itemprop=name content="Introduction au single sign on sur SharePoint 2010 - partie 6"><meta itemprop=description content="Partie précédente
SharePoint et le SSO : Configuration
Il existe des tutoriels assez détaillé sur la configuration d’AD FS et SharePoint, plutôt que de refaire ce qui a déjà été fait, je vais vous..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Introduction au single sign on sur SharePoint 2010 - partie 6"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-26-00/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Partie précédente
SharePoint et le SSO : Configuration
Il existe des tutoriels assez détaillé sur la configuration d’AD FS et SharePoint, plutôt que de refaire ce qui a déjà été fait, je vais vous..."><meta property="og:site_name" content="Le blog de baywet"><meta property="og:updated_time" content="2023-09-05T06:26:38-04:00"><meta property="article:published_time" content="2011-09-26T22:26:00+00:00"><meta property="article:modified_time" content="2023-09-05T06:26:38-04:00"><meta property="article:section" content><meta property="article:tag" content="introduction"><meta property="article:tag" content="ssl"><meta property="article:tag" content="claims"><meta property="article:tag" content="sso"><meta property="article:tag" content="sharepoint"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Introduction au single sign on sur SharePoint 2010 - partie 6"><meta name=twitter:description content="Partie précédente
SharePoint et le SSO : Configuration
Il existe des tutoriels assez détaillé sur la configuration d’AD FS et SharePoint, plutôt que de refaire ce qui a déjà été fait, je vais vous..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span>
<span></span>
<span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=/en>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>Introduction au single sign on sur SharePoint 2010 - partie 6</h1><p class=subtitle>Sep 26, 2011</p><div class=content><p><a href=../introduction-au-single-sign-on-2011-09-26-22-29-00>Partie précédente</a></p><h2 id=sharepoint-et-le-sso-configuration>SharePoint et le SSO : Configuration</h2><p>Il existe des tutoriels assez détaillé sur la configuration d’AD FS et SharePoint, plutôt que de refaire ce qui a déjà été fait, je vais vous indiquer des tutoriels à suivre et les « compléter » dans cette partie:</p><p><a href=https://blogs.technet.com/b/speschka/archive/2010/07/30/configuring-sharepoint-2010-and-adfs-v2-end-to-end.aspx>https://blogs.technet.com/b/speschka/archive/2010/07/30/configuring-sharepoint-2010-and-adfs-v2-end-to-end.aspx</a></p><p>Pour effectuer la configuration de SharePoint et d’AD FS, suivez cet article de A à Z (en adaptant avec les claims que vous avez décidé d’utiliser). Attention tout de même, il n’explique pas comment ajouter d’autres types de claims à votre claim provider trust dans AD FS. Le but étant de les faire correspondre aux claims que vous avez configurés sur votre RP-STS dans AD FS et au niveau de l’authentication provider dans SharePoint. Donc, après avoir suivi le step by step fourni dans cet article, je vous conseille de suivre la petite procédure suivante (toujours en adaptant avec vos claims) pour terminer la configuration d’AD FS.</p><p>1.            Ouvrir la console AD FS</p><p>2.            Sélectionner Trust Relationships</p><p>3.            Puis Claims Provider Trust</p><p>4.            Edit Claim Rules (via clic droit sur Active Directory)</p><p>5.            Ajoutez-y les claims que vous avez préalablement configurés dans votre RP-STS. (voir screenshot)</p><p><img src=./adfsclaims.png alt=adfsclaims.png></p><p>Vous pouvez aussi vous aider de cette ressource pour améliorer votre compréhension, beaucoup de concepts y sont expliqués. Contrairement à la première ressource ce n’est pas un step by step mais c’est très complet.</p><p><a href=https://marcvaneijk.wordpress.com/2010/06/12/sharepoint-2010-and-adfs-2-0-the-complete-step-by-step-guide/>https://marcvaneijk.wordpress.com/2010/06/12/sharepoint-2010-and-adfs-2-0-the-complete-step-by-step-guide/</a></p><p>Dès lors que vous avez configuré votre première application et que vous souhaitiez en ajouter une autre à votre infrastructure SSO:</p><ul><li><p>Configurez un nouveau RP-STS sur AD FS (post back url et realm différents)</p></li><li><p>Effectuez la configuration sur la partie Sharepoint (il s&rsquo;agit d&rsquo;ajouter un realm et une url à l&rsquo;authentication provider déjà configuré, aidez-vous de la seconde partie de cet article <a href=https://blogs.technet.com/b/speschka/archive/2010/04/27/how-to-create-multiple-claims-auth-web-apps-in-a-single-sharepoint-2010-farm.aspx>https://blogs.technet.com/b/speschka/archive/2010/04/27/how-to-create-multiple-claims-auth-web-apps-in-a-single-sharepoint-2010-farm.aspx</a>)</p></li></ul><p>Je ferais probablement plus tard un step-by-step complet sur ce point.<a href="/controlpanel/blogs/posteditor.aspx?SelectedNavItem=NewPost#_msocom_1">[V1]</a></p><p><strong>Remarque :</strong> lorsque vous activez uniquement le mode claims via authentication provider sur une web application l’indexation pour la recherche ne peut plus s’effectuer.</p><p>L’astuce pour palier à cet inconvénient majeur consiste à activer le NTLM en mode claims et un authentication provider AD FS. Les clients disposeront alors d’une fenêtre comme celle ci-dessous  lors de la connexion leur demandant de choisir sur quelle base s’identifier.</p><p>**<img src=./adfssignin.png alt=adfssignin.png></p><p>**Remarque :**si vous ne souhaitez pas laisser ce choix à vos utilisateurs tout en gardant l’indexation de la recherche, il vous suffit d’ajouter une zone à la WebApp et de configurer le mode NTLM comme mode d’authentification pour cette zone. (Seul mode supporté par le crawl)</p><p>Le fonctionnement est relativement simple :</p><p>La WebApp dispose de plusieurs zones (donc de plusieurs url)</p><p>Un ou plusieurs modes d’authentification ont été configuré par zone.</p><p>C’est donc en fonction de l’url de provenance du visiteur que la WebApp va proposer les modes d’authentification correspondants à la zone associée. S’il n’y a qu’un seul mode, il est proposé directement (la page ci-dessus n’est pas affichée).</p><p>Dans mon cas, il s’agissait d’une zone publique avec un Authentication Provider AD FS pour le SSO ainsi qu’une zone privée interne à mon infrastructure SharePoint (NTLM activé pour disposer du crawl du contenu de chacune de mes WebApps)</p><p>Voici un article qui explique comment configurer une zone supplémentaire pour une web application (étape 2)</p><p><a href=https://help.sharepointsolutions.com/products/Excm/webframe.html?Configuration_FBA_DualZone.html>https://help.sharepointsolutions.com/products/Excm/webframe.html?Configuration_FBA_DualZone.html</a></p><p>Enfin il vous suffira ensuite d’éditer la source d’indexation dans l’application de service de recherche SharePoint pour spécifier l’url de la web app qui prend en charge le NTLM.</p><p><a href=../introduction-au-single-sign-on-2011-09-26-22-29-00>Suite et fin</a></p></div><br><p class=heading>Edité la dernière fois le
<a href=https://github.com/baywet/blogsource/commit/8ff4cc44b2e100ad313979373115fba0aacf1c6d>5 Sep 2023</a> par <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/introduction><span class=tag>Introduction</span></a></div><div class=control><a href=/fr/tags/ssl><span class=tag>Ssl</span></a></div><div class=control><a href=/fr/tags/claims><span class=tag>Claims</span></a></div><div class=control><a href=/fr/tags/sso><span class=tag>Sso</span></a></div><div class=control><a href=/fr/tags/sharepoint><span class=tag>Sharepoint</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-29-00/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Introduction au single sign on sur SharePoint 2010 - partie 7</span>
<span class="is-hidden-touch is-hidden-widescreen">Introduction au single sign on sur SharePoint 2010 - partie 7</span>
<span class="is-hidden-mobile is-hidden-desktop">Introduction au single sign on sur SharePoint 2010...</span>
<span class=is-hidden-tablet>Introduction au single sign on sur...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-25-00/><span class="is-hidden-touch is-hidden-desktop-only">Introduction au single sign on sur SharePoint 2010 - partie 5</span>
<span class="is-hidden-touch is-hidden-widescreen">Introduction au single sign on sur SharePoint 2010 - partie 5</span>
<span class="is-hidden-mobile is-hidden-desktop">Introduction au single sign on sur SharePoint 2010...</span>
<span class=is-hidden-tablet>Introduction au single sign on sur...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-26-00/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-25-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 5&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Claims</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-23-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 4&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Claims</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-22-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 3&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-21-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 2&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-18-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 1&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Claims</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/reconduite-de-mon-titre-msp/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Reconduite de mon titre MSP&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/uploader-automatiquement-les-p/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Uploader automatiquement les photos des utilisateurs SharePoint sur leur profil en PowerShell&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/upgrade-des-bases-de-donnees-m/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Upgrade des bases de données mirrorées avec le SP1 de SharePoint&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/re-realease-de-la-mise-a-jour/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Re-Realease de la mise à jour cumulative de Juin (CU1 June)&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-16-42-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 3&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-16-11-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 2&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-15-47-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 1&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/sp1-pour-sharepoint-2010/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>SP1 pour SharePoint 2010&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/mirroring-sql-et-sharepoint-t/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Mirroring SQL et SharePoint : Tips & Piège&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/webconference-sur-la-securite/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>WebConférence sur la sécurité avec la gamme ForeFront 2010&nbsp;<div class=tag>Sharepoint</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span></a> &nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>