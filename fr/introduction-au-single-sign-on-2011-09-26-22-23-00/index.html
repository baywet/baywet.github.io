<!doctype html><html lang=fr dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Introduction au single sign on sur SharePoint 2010 - partie 4</title><meta name=author content="Vincent Biret"><meta name=description content="Partie précédente
Fonctionnement théorique des revendications (claims), du SAML et d’AD FS

Le fonctionnement diffère selon la version des claims configurée (1.1 ou 2.0). SharePoint supporte les deux..."><meta name=generator content="Hugo 0.74.3"><meta itemprop=name content="Introduction au single sign on sur SharePoint 2010 - partie 4"><meta itemprop=description content="Partie précédente
Fonctionnement théorique des revendications (claims), du SAML et d’AD FS

Le fonctionnement diffère selon la version des claims configurée (1.1 ou 2.0). SharePoint supporte les deux..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Introduction au single sign on sur SharePoint 2010 - partie 4"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-23-00/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Partie précédente
Fonctionnement théorique des revendications (claims), du SAML et d’AD FS

Le fonctionnement diffère selon la version des claims configurée (1.1 ou 2.0). SharePoint supporte les deux..."><meta property="og:site_name" content="Le blog de baywet"><meta property="og:updated_time" content="2020-09-05T13:53:32-04:00"><meta property="article:published_time" content="2011-09-26T22:23:00+00:00"><meta property="article:modified_time" content="2020-09-05T13:53:32-04:00"><meta property="article:section" content><meta property="article:tag" content="introduction"><meta property="article:tag" content="ssl"><meta property="article:tag" content="claims"><meta property="article:tag" content="sso"><meta property="article:tag" content="sharepoint"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Introduction au single sign on sur SharePoint 2010 - partie 4"><meta name=twitter:description content="Partie précédente
Fonctionnement théorique des revendications (claims), du SAML et d’AD FS

Le fonctionnement diffère selon la version des claims configurée (1.1 ou 2.0). SharePoint supporte les deux..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-176061333-1','auto');ga('send','pageview');</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/fr><div class="title is-4">&nbsp;Le blog de baywet</div></a><label class="button navbar-burger is-white" for=navbar-burger-state><span></span><span></span><span></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=/en>English</a></div></div></div></nav><section class=section style=flex:1><div class=container><p class=title>Introduction au single sign on sur SharePoint 2010 - partie 4</p><p class=subtitle>Sep 26, 2011</p><div class=content><p><a href=../introduction-au-single-sign-on-2011-09-26-22-29-00>Partie précédente</a></p><h1 id=fonctionnement-théorique-des-revendications-claims-du-saml-et-dad-fs>Fonctionnement théorique des revendications (claims), du SAML et d’AD FS</h1><p><img src=./adfshowto.png alt=adfshowto.png></p><p>Le fonctionnement diffère selon la version des claims configurée (1.1 ou 2.0). SharePoint supporte les deux dans sa version 2010. Pour les plus curieux d’entre vous les différences entre la v1.1 et la v2 résident dans une amélioration des schémas de descriptions des données et des méthodes de communication (le détail ici <a href=https://wiki.shibboleth.net/confluence/display/SHIB/SAMLDiffs>https://wiki.shibboleth.net/confluence/display/SHIB/SAMLDiffs</a> ).</p><p>Voici brièvement le fonctionnement :</p><p>1.       Connexion du CLIENT à l&rsquo;Application Web SharePoint (RELYING-PARTY STS)</p><p>2.       Vérification par le RP-STS de la présence et de la validité d’un token d&rsquo;authentification chez le client ET chez le Identity-Provider Secure Token Service (IP-STS).</p><p>§  Si ce n’est pas le cas le RP-STS redirige le client vers l’IP-STS (identity provider, son rôle est de délivrer des jetons).</p><p>§  Une fois sur l’IP-STS le client s’identifie soit par appel de l’IP-STS fera soit appel à la base d’identification (Active Directory, KDC, forms…) pour vérifier l’identité, soit par remontée en cascade de la demande à un autre IP-STS.</p><p>C’est grâce à mise en cascade que l’on peut faire de la fédération d’identité, on pourrait parfaitement imaginer que votre entreprise fasse confiance à ses partenaires pour donner accès à des ressources internes à des intervenants externes.</p><p>Vous pourriez aussi faire confiance à des services d’identité (à ne pas confondre avec des fournisseurs d’identité) tels que FaceBook, LiveID etc etc…</p><p>3.       Enfin le client est authentifié et redirigé vers le RP-STS (notre web application SharePoint) par l’IP-STS ou bien par le client avec le jeton, la mécanique d’autorisation entre en jeu.</p><p>Dans le cas où notre client aurait déjà son jeton d’authentification à la première étape, nous pouvons directement passer à la partie autorisation. C’est de cette façon que nous retrouvons le fonctionnement voulu, il n’y a pas besoin de réauthentification. Voilà donc notre Single-Sign-On.</p><p>Dernier composant optionnel sur ce schéma, le sélecteur d’identité qui peut être installé sur le client, qui mémorise une partie des jetons et permet à l’utilisateur de choisir le jeton à présenter s’il en a plusieurs sans avoir à retaper le mot de passe. Windows CardSpace est par exemple un sélecteur d’identité.</p><p>Détails supplémentaires à connaitre :</p><ul><li><p>Chaque RP-STS est identifié par un IP-STS par un domaine d’identification (realm, de la forme urn:foo:bar que vous définissez vous-même à la manière d’une clef) et par une url d’appel (qui est passée automatiquement par le RP-STS à chaque appel de l’IP-STS)</p></li><li><p>Pour des raisons de sécurité, tout passe obligatoirement en HTTPS pour la communication.</p></li><li><p>De manière optionnelle et pour plus de sécurité, il est possible de chiffrer les jetons avec un autre certificat qui seront ensuite chiffrés une nouvelle fois dans le canal HTTPS, mais ce n’est pas obligatoire.</p></li><li><p>Chaque IP-STS est identifié par un certificat SSL et une url d’authentification auprès d’un RP-STS ou d’un autre IP-STS, du point de vue d’un RP-STS, un même certificat ne peut pas servir pour plusieurs IP-STS. (1 certificat &lt;=> 1 IP-STS)</p></li></ul><p>Remarque importante : AD FS ne peut être installé sur un contrôleur de domaine pour des raisons de sécurité, si l’installation réussit, vous aurez des problèmes de configuration par la suite.</p><p>Lien de téléchargement d’AD FS v2 (c’est la version 1 qui est inclue dans Windows Server 2008 R2, et dans notre cas de figure nous avons besoin de la V2)</p><p><a href="https://www.microsoft.com/download/en/details.aspx?id=10909&hash=ivIYzcSEoBV%2bUnxH4UuRCqCVprFODwMc%2bHjkXud7WIhTNMIutWWpPT3nqrKaFAL6ug%2bQEN%2b9RD4NofTgiQyj6A%3d%3d">https://www.microsoft.com/download/en/details.aspx?id=10909&hash=ivIYzcSEoBV%2bUnxH4UuRCqCVprFODwMc%2bHjkXud7WIhTNMIutWWpPT3nqrKaFAL6ug%2bQEN%2b9RD4NofTgiQyj6A%3d%3d</a></p><p>Je vous conseille de lire ces deux ressources pour améliorerer grandement votre compréhension de la chose :</p><p><a href=https://www.sharepointsecurity.com/sharepoint/sharepoint-security/ten-part-sharepoint-claims-based-authentication-series/>https://www.sharepointsecurity.com/sharepoint/sharepoint-security/ten-part-sharepoint-claims-based-authentication-series/</a></p><p><a href=https://msdn.microsoft.com/en-us/magazine/ee335707.aspx>https://msdn.microsoft.com/en-us/magazine/ee335707.aspx</a> (avant la partie de code, qui est aussi intéressante mais qui s’écarte un peu de notre sujet)</p><p><a href=../introduction-au-single-sign-on-2011-09-26-22-29-00>Suite ici</a></p></div><br><p class=heading>Edité la dernière fois le
<a href=https://github.com/baywet/blogsource/commit/aad92dac3082a952347d50334be671de7df46bec>5 Sep 2020</a> par <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/fr/tags/introduction><span class=tag>Introduction</span></a></div><div class=control><a href=/fr/tags/ssl><span class=tag>Ssl</span></a></div><div class=control><a href=/fr/tags/claims><span class=tag>Claims</span></a></div><div class=control><a href=/fr/tags/sso><span class=tag>Sso</span></a></div><div class=control><a href=/fr/tags/sharepoint><span class=tag>Sharepoint</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-25-00/><span class="icon is-small"><i class="fa fa-chevron-left"></i></span><span class="is-hidden-touch is-hidden-desktop-only">Introduction au single sign on sur SharePoint 2010 - partie 5</span>
<span class="is-hidden-touch is-hidden-widescreen">Introduction au single sign on sur SharePoint 2010 - partie 5</span>
<span class="is-hidden-mobile is-hidden-desktop">Introduction au single sign on sur SharePoint 2010...</span>
<span class=is-hidden-tablet>Introduction au single sign on sur...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-22-00/><span class="is-hidden-touch is-hidden-desktop-only">Introduction au single sign on sur SharePoint 2010 - partie 3</span>
<span class="is-hidden-touch is-hidden-widescreen">Introduction au single sign on sur SharePoint 2010 - partie 3</span>
<span class="is-hidden-mobile is-hidden-desktop">Introduction au single sign on sur SharePoint 2010...</span>
<span class=is-hidden-tablet>Introduction au single sign on sur...</span>
<span class="icon is-small"><i class="fa fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-23-00/";this.page.identifier=window.location.pathname;};(function(){var d=document,s=d.createElement('script');s.src='https://baywet.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-22-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 3&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-21-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 2&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/introduction-au-single-sign-on-2011-09-26-22-18-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Introduction au single sign on sur SharePoint 2010 - partie 1&nbsp;<div class=tag>Introduction</div><div class=tag>Ssl</div><div class=tag>Claims</div><div class=tag>Sso</div><div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/reconduite-de-mon-titre-msp/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Reconduite de mon titre MSP&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/uploader-automatiquement-les-p/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Uploader automatiquement les photos des utilisateurs SharePoint sur leur profil en PowerShell&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/upgrade-des-bases-de-donnees-m/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Upgrade des bases de données mirrorées avec le SP1 de SharePoint&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/re-realease-de-la-mise-a-jour/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Re-Realease de la mise à jour cumulative de Juin (CU1 June)&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-16-42-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 3&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-16-11-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 2&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/industrialisation-des-installa-2011-07-06-15-47-00/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Industrialisation des installations de ferme SharePoint 2010(CU, SP, Langues, SlipStream) Part 1&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/sp1-pour-sharepoint-2010/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>SP1 pour SharePoint 2010&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/mirroring-sql-et-sharepoint-t/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Mirroring SQL et SharePoint : Tips & Piège&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/webconference-sur-la-securite/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>WebConférence sur la sécurité avec la gamme ForeFront 2010&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/topologie-des-fermes-sharepoin/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Topologie des fermes SharePoint et déploiement de ForeFront Protection for SharePoint&nbsp;<div class=tag>Sharepoint</div></span></a><a class=panel-block href=https://baywet.github.io/fr/vue-densemble-des-services-de/><span class="icon is-small"><i class="fa fa-chevron-right"></i></span><span>&nbsp;</span>
<span>Vue d’ensemble des services de conversion des documents dans SharePoint 2010&nbsp;<div class=tag>Sharepoint</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fa fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/fr><span class=icon><i class="fa fa-home"></i></span></a>&nbsp;
<a class=button href><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>