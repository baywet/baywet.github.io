<!doctype html><html lang=en dir=ltr itemscope itemtype=https://schema.org/Article><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Git: fork/import/manual copy, keep it clean</title>
<meta name=author content="Vincent Biret"><meta name=description content="Part of my role at 2toLead is to help set guidance around best source management practices either internally or for our customers. One of the questions I get often is: Should I fork this repository or..."><meta name=generator content="Hugo 0.124.1"><meta itemprop=name content="Git: fork/import/manual copy, keep it clean"><meta itemprop=description content="Part of my role at 2toLead is to help set guidance around best source management practices either internally or for our customers. One of the questions I get often is: Should I fork this repository or..."><meta itemprop=image content="/img/logo.svg"><meta property="og:title" content="Git: fork/import/manual copy, keep it clean"><meta property="og:type" content="article"><meta property="og:url" content="https://baywet.github.io/git-forkimportmanual-copy-keep/"><meta property="og:image" content="/img/logo.svg"><meta property="og:description" content="Part of my role at 2toLead is to help set guidance around best source management practices either internally or for our customers. One of the questions I get often is: Should I fork this repository or..."><meta property="og:site_name" content="Baywet's blog"><meta property="og:updated_time" content="2024-04-15T10:13:42-04:00"><meta property="article:published_time" content="2018-03-21T04:00:00+00:00"><meta property="article:modified_time" content="2024-04-15T10:13:42-04:00"><meta property="article:section" content><meta property="article:tag" content="devops"><meta property="article:tag" content="vsts"><meta property="article:tag" content="git"><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:title content="Git: fork/import/manual copy, keep it clean"><meta name=twitter:description content="Part of my role at 2toLead is to help set guidance around best source management practices either internally or for our customers. One of the questions I get often is: Should I fork this repository or..."><meta name=twitter:creator content><meta name=twitter:image:src content="/img/logo.svg"><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.js integrity=sha384-IkmLcEDxkvCioiswmdraONwAU9uwbPWUbvuHAGrejK3zNlL74FCwCjvnTGJcrdbQ crossorigin=anonymous></script><link rel=stylesheet type=text/css href=/css/capsule.min.css><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-176061333-1","auto"),ga("send","pageview")</script><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=icon href=/img/favicon.ico></head><body style=min-height:100vh;display:flex;flex-direction:column><nav class="navbar has-shadow is-white" role=navigation aria-label="main navigation"><div class=container><div class=navbar-brand><a class=navbar-item href=/><div class="title is-4">&nbsp;Baywet's blog</div></a><label role=button class="navbar-burger has-text-dark" aria-label=menu aria-expanded=false for=navbar-burger-state><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></label></div><input type=checkbox id=navbar-burger-state><div class=navbar-menu><div class=navbar-end><a class=navbar-item href=https://baywet.github.io/fr/git-forkimportercopie-manuell/>Français</a></div></div></div></nav><section class=section style=flex:1><div class=container><h1 class=title>Git: fork/import/manual copy, keep it clean</h1><p class=subtitle>Mar 21, 2018</p><div class=content><p>Part of my role at 2toLead is to help set guidance around best source management practices either internally or for our customers. One of the questions I get often is: Should I fork this repository or do something else with it?</p><p>It’s hard to get clear and simple guidance on the web so I thought I’d take a stab at it.</p><p>As we’re using Visual Studio Team Services, my examples and screenshots will be based on it, but it really applies to any git service like Github or internal git servers.</p><h2 id=the-options-you-get>The options you get</h2><p>From my point of view, when you have an existing repository somewhere, you have the following options to move/copy it depending on your scenario:</p><ul><li><strong>Making a manual copy</strong>: manually copying files over, running a git init or something similar and starting anew. This should probably be always avoided. You’ll lose history, capability to merge with the source and so on. <strong>Even if it looks super easy, you’ll regret it later</strong>.</li><li><strong>Using the import option</strong>: In VSTS you have the option, after creating a new repository, to import the content (and history, and branches…) from another repository**. This is great for simple migration scenarios** as it’ll keep the history and other artifacts that will be useful later. Use it if the source is not in the same service (ie Github => VSTS) or if you’re planning to delete the source right after.</li><li><strong>Fork a repo</strong>(from the source): this is probably the best option if you’re planning to have both the source and the new repository live. It will allow you to easily port your commits from one repository to another (via pull requests). <strong>This choice should probably be your go to by default</strong>.</li></ul><p>Example of authoring a PR across repos.</p><p><img alt=14.png src=./14.png></p><p>Example of importing a repo</p><p><img alt=15.PNG src=./15.PNG></p><h2 id=getting-out-from-the-mess>Getting out from the mess</h2><p>Now let’s say you landing on this article because the situation already got out of control. You have the “same” source base that got over multiple repositories, and not necessary on the recommended way, how do you fix that?</p><p>Before we begin let me say that this operation can be error prone, make you loose work, will induce a “service interruption” (even short) for your developers and this solution is provided with no warranty whatsoever. Also make sure all changes are committed and pushed before starting anything, for every developer accessing the repo.</p><p>You are facing two main cases:</p><ul><li>Your repositories have at some point a common commits tree (they have been forked or imported). Git is going to “understand” some of what happened and will be able to help us</li><li>Your repositories don’t share a common tree (manual copy of files), you are going to have to “replay” the changes on the new fork manually, super error prone.</li></ul><h3 id=common-tree-scenario>Common tree scenario</h3><p>Let’s say I have the current structure.</p><p>ProjectA/RepoSource</p><p>ProjectB/ImportedRepo</p><p>The second one being an import of the source one. Source didn’t get any updates since the import but the import did. And now I want to be able to propagate changes from importedRepo to the source one, without having to handle merges and multiple remotes locally.</p><p>First, fork the RepoSource repo into ProjectB/ForkedRepo</p><p>Then clone the ForkedRepo locally. After that run the following commands.</p><p><a href=https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-bringimportedrepobranchesbacktoforked-sh>https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-bringimportedrepobranchesbacktoforked-sh</a></p><p>Make sure you set up the branch policies, builds definitions and release definitions are up to date. Even run a diff tool on your local machine, branch per branch, between the two repositories folders and you’re good to go!</p><p>For the other developers on the team, simply run these set of commands to re-map to the new forked repository.</p><p><a href=https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-updatedevelopersrepoaftermigration-sh>https://gist.github.com/baywet/0373d9a298bbb5f4cbd0ae6df6326872#file-updatedevelopersrepoaftermigration-sh</a></p><h2 id=my-ask-for-the-vsts-product-team>My ask for the VSTS product team</h2><p>Please make it easier to move Git repositories between team projects keeping the fork link and everything.</p><p><a href=https://visualstudio.uservoice.com/forums/330519-visual-studio-team-services/suggestions/17189462-make-it-easier-to-move-a-git-repo-from-one-team-pr>https://visualstudio.uservoice.com/forums/330519-visual-studio-team-services/suggestions/17189462-make-it-easier-to-move-a-git-repo-from-one-team-pr</a></p><h2 id=conclusion>Conclusion</h2><p>I hope that post helped bring a bit of clarity on the best practices as well as it helped some of you fix the situation.</p></div><br><p class=heading>Last edited
<a href=https://github.com/baywet/blogsource/commit/f9e991747e54c1ef20df74731781a7d829a3984e>Apr 15, 2024
</a>by <a href=https://github.com/baywet>Vincent Biret</a></p><br><div class=heading>Tags:</div><div class="field is-grouped is-grouped-multiline"><div class=control><a href=/tags/devops><span class=tag>Devops</span></a></div><div class=control><a href=/tags/vsts><span class=tag>Vsts</span></a></div><div class=control><a href=/tags/git><span class=tag>Git</span></a></div></div></div></section><section class=section><div class=container><div class=level><div class=level-left><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/internet-explorer-compatibilit/><span class="icon is-small"><i class="fas fa-chevron-left"></i></span>
<span class="is-hidden-touch is-hidden-desktop-only">Internet Explorer compatibility mode is changing on SharePoint Online
</span><span class="is-hidden-touch is-hidden-widescreen">Internet Explorer compatibility mode is changing on SharePoint Online
</span><span class="is-hidden-mobile is-hidden-desktop">Internet Explorer compatibility mode is changing...
</span><span class=is-hidden-tablet>Internet Explorer compatibility mode is...</span></a></p></div></div><div class=level-right><div class=level-item><p class="control has-addons"><a class=button href=https://baywet.github.io/new-sharepoint-framework-pnp-s/><span class="is-hidden-touch is-hidden-desktop-only">New SharePoint Framework PnP Samples available: using the Skype UCWA Web SDK to subscribe to...
</span><span class="is-hidden-touch is-hidden-widescreen">New SharePoint Framework PnP Samples available: using the Skype UCWA Web...
</span><span class="is-hidden-mobile is-hidden-desktop">New SharePoint Framework PnP Samples available:...
</span><span class=is-hidden-tablet>New SharePoint Framework PnP Samples...
</span><span class="icon is-small"><i class="fas fa-chevron-right"></i></span></a></p></div></div></div></div><br><br><div class=container><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://baywet.github.io/git-forkimportmanual-copy-keep/",this.page.identifier=window.location.pathname};(function(){var e=document,t=e.createElement("script");t.src="https://baywet.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><br><div class=container><nav class=panel><p class=panel-heading>Related</p><a class=panel-block href=https://baywet.github.io/speaking-at-sharepoint-saturda-2017-11-16-17-26-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Speaking at SharePoint Saturday Detroit 2017&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/using-pnp-powershell-on-visual/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Using PnP PowerShell on Visual Studio Team Services (VSTS) Hosted Agent&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-10-06-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Conclusion&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-10-04-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Bonus SonarLint extension configuration&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-10-02-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Monitoring the results&nbsp;<div class=tag>Devops</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-29-08-00-00labd/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Updating your build definitions&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-29-08-00-00qwqw/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Creating the SonarQube project&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-27-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Creating and configuring a service account for VSTS in SonarQube&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-25-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Setting up Azure Active directory for authentication&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-20-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Opening SonarQube’s ports&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-18-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Installing the machine&nbsp;<div class=tag>Devops</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-15-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Creating the database&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-13-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Provisioning the SonarQube VM&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-11-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - What parts to use?&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a><a class=panel-block href=https://baywet.github.io/determine-your-technical-debt-2017-09-08-08-00-00/><span class="icon is-small"><i class="fas fa-chevron-right"></i></span>
<span>&nbsp;</span>
<span>Determine your technical debt using SonarQube - Static analysis&nbsp;<div class=tag>Devops</div><div class=tag>Vsts</div></span></a></nav></div></section><footer class=footer><div class=container><nav class=level></nav><nav class=level><div class="level-left has-text-centered"><div class=level-item><form class="control has-icons has-icons-right" method=get action=https://bing.com><input class=input type=text name=q maxlength=255 placeholder=Search>
<input class=input type=hidden name=sites value=https://baywet.github.io/>
<span class="icon is-small is-right"><i class="fas fa-search"></i></span></form></div></div><div class="level-right has-text-centered"><div class=level-item><a class=button href=https://baywet.github.io/en><span class=icon><i class="fa fa-home"></i></span>
</a>&nbsp;
<a class=button href><span class=icon><i class="fas fa-rss"></i></span></a></div></div></nav></div></footer><script id=dsq-count-scr src=//baywet.disqus.com/count.js async></script></body></html>